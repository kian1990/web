{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":""},{"location":"blog/","title":"\u535a\u5ba2","text":""},{"location":"blog/2023/12/23/hexo/","title":"Hexo","text":"<p>\u5feb\u901f\u3001\u7b80\u5355\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u535a\u5ba2\u6846\u67b6\uff0c\u57fa\u4e8e Node.js</p> <p>\u5b98\u7f51 | \u6587\u6863 | API</p>"},{"location":"blog/2023/12/23/hexo/#_1","title":"\u7279\u6027","text":"<ul> <li>\u5feb\u901f\u751f\u6210</li> <li>\u652f\u6301 GitHub Flavored Markdown \u548c\u5927\u591a\u6570 Octopress \u63d2\u4ef6</li> <li>\u4e00\u952e\u90e8\u7f72\u5230 GitHub Pages\u3001Heroku \u7b49</li> <li>\u5f3a\u5927\u7684 API\uff0c\u53ef\u5b9e\u73b0\u65e0\u9650\u7684\u6269\u5c55\u6027</li> <li>\u6570\u767e \u4e3b\u9898 \u548c \u63d2\u4ef6</li> </ul>"},{"location":"blog/2023/12/23/hexo/#_2","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"blog/2023/12/23/hexo/#_3","title":"\u5b89\u88c5","text":"<pre><code>npm install hexo-cli -g\n</code></pre>"},{"location":"blog/2023/12/23/hexo/#brew","title":"\u901a\u8fc7 brew \u5b89\u88c5","text":"<pre><code>brew install hexo\n</code></pre>"},{"location":"blog/2023/12/23/hexo/#_4","title":"\u521d\u59cb\u5316\u535a\u5ba2","text":"<pre><code>hexo init blog\ncd blog\n</code></pre>"},{"location":"blog/2023/12/23/hexo/#_5","title":"\u542f\u52a8\u52a8\u6001\u670d\u52a1\u5668","text":"<pre><code>hexo server\n</code></pre>"},{"location":"blog/2023/12/23/hexo/#_6","title":"\u751f\u6210\u9759\u6001\u6587\u4ef6","text":"<pre><code>hexo generate\n</code></pre>"},{"location":"blog/2023/12/23/hexo/#_7","title":"\u521b\u5efa\u6587\u7ae0","text":"<pre><code>hexo new \"Hello Hexo\"\n</code></pre>"},{"location":"blog/2023/12/23/hexo/#_8","title":"\u8d21\u732e","text":""},{"location":"blog/2023/12/23/hexo/#_9","title":"\u652f\u6301","text":""},{"location":"blog/2023/12/23/hexo/#_10","title":"\u8bb8\u53ef","text":""},{"location":"blog/2024/04/09/hive/","title":"Hive","text":""},{"location":"blog/2024/04/09/hive/#_1","title":"\u6570\u636e\u7c7b\u578b","text":""},{"location":"blog/2024/04/09/hive/#_2","title":"\u57fa\u672c\u6570\u636e\u7c7b\u578b","text":"\u6570\u636e\u7c7b\u578b \u63cf\u8ff0 TINYINT 1 byte\uff0c\u6709\u7b26\u53f7\u6574\u6570\uff0c-128 ~ 127 SMALINT 2 byte\uff0c\u6709\u7b26\u53f7\u6574\u6570\uff0c-32768 to 32767 INT/INTEGER 4 byte\uff0c \u6709\u7b26\u53f7\u6574\u6570\uff0c-2147483648 ~ 2147483647 BIGINT 8 byte\uff0c\u6709\u7b26\u53f7\u6574\u6570\uff0c-9223372036854775808 ~ 9223372036854775807 FLOAT 4 byte\uff0c\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570 DOUBLE 8 byte\uff0c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570 DECIMAL Hive \u4e2d\u7684 DECIMAL \u7c7b\u578b\u57fa\u4e8e Java \u7684 BigDecimal\uff0c\u5b83\u7528\u4e8e\u8868\u793a Java \u4e2d\u4e0d\u53ef\u53d8\u7684\u4efb\u610f\u7cbe\u5ea6\u5341\u8fdb\u5236\u6570\u5b57 NUMERIC \u548c DECIMAL \u7c7b\u4f3c\uff0cHive 3.0.0 \u5f15\u5165 TIMESTAMP \u65f6\u95f4\u6233\uff0c\u652f\u6301\u5177\u6709\u53ef\u9009\u7eb3\u79d2\u7cbe\u5ea6\u7684\u4f20\u7edf UNIX \u65f6\u95f4\u6233 DATE \u65e5\u671f\uff0c\u683c\u5f0f\u4e3a YYYY-MM-DD INTERVAL \u65f6\u95f4\u95f4\u9694 STRING \u5b57\u7b26\u4e32 VARCHAR VARCHAR \u4e0e STRING \u7c7b\u4f3c\uff0c\u4f46\u662f STRING \u5b58\u50a8\u53d8\u957f\u7684\u6587\u672c\uff0c\u5bf9\u957f\u5ea6\u6ca1\u6709\u9650\u5236\uff1bvarchar \u957f\u5ea6\u4e0a\u53ea\u5141\u8bb8\u5728 1-65355 \u4e4b\u95f4 CHAR Char \u7c7b\u578b\u7c7b\u4f3c\u4e8e Varchar\uff0c\u4f46 CHAR \u662f\u56fa\u5b9a\u957f\u5ea6\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u6bd4\u6307\u5b9a\u957f\u5ea6\u503c\u77ed\u7684\u503c\u7a7a\u7f3a\u90e8\u5206\u4f1a\u7528\u7a7a\u683c\u586b\u5145\uff0c\u4f46\u5728\u6bd4\u8f83\u671f\u95f4\u5c3e\u968f\u7a7a\u683c\u5e76\u4e0d\u91cd\u8981\u3002\u6700\u5927\u957f\u5ea6\u56fa\u5b9a\u4e3a 255 BOOLEAN \u5e03\u5c14\u503c BINARY \u5b57\u8282\u6570\u7ec4\uff0c\u5bf9\u5e94 Java \u4e2d\u7684 byte[]\u7c7b\u578b"},{"location":"blog/2024/04/09/hive/#_3","title":"\u590d\u6742\u6570\u636e\u7c7b\u578b","text":"\u6570\u636e\u7c7b\u578b \u63cf\u8ff0 ARRAY \u6570\u7ec4\u662f\u4e00\u7ec4\u5177\u6709\u76f8\u540c\u7c7b\u578b\u548c\u540d\u79f0\u7684\u53d8\u91cf\u7684\u96c6\u5408\u3002\u8fd9\u4e9b\u53d8\u91cf\u79f0\u4e3a\u6570\u7ec4\u7684\u5143\u7d20\uff0c\u6bcf\u4e2a\u6570\u7ec4\u5143\u7d20\u90fd\u6709\u4e00\u4e2a\u7f16\u53f7\uff0c\u7f16\u53f7\u4ece\u96f6\u5f00\u59cb\u3002\u4f8b\u5982\uff0c\u6570\u7ec4\u503c\u4e3a[\u2018John\u2019, \u2018Doe\u2019]\uff0c\u90a3\u4e48\u7b2c 2 \u4e2a\u5143\u7d20\u53ef\u4ee5\u901a\u8fc7\u6570\u7ec4\u540d[1]\u8fdb\u884c\u5f15\u7528 MAP MAP \u662f\u4e00\u7ec4\u952e-\u503c\u5bf9\u5143\u7ec4\u96c6\u5408\uff0c\u4f7f\u7528\u6570\u7ec4\u8868\u793a\u6cd5\u53ef\u4ee5\u8bbf\u95ee\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u5217\u7684\u6570\u636e\u7c7b\u578b\u662f MAP\uff0c\u5176\u4e2d\u952e-&gt;\u503c\u5bf9\u662f\u2019first\u2019-&gt;\u2019John\u2019\u548c\u2019last\u2019-&gt;\u2019Doe\u2019\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u5b57\u6bb5\u540d[\u2018last\u2019]\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\u5143\u7d20 STRUCT \u548c c \u8bed\u8a00\u4e2d\u7684 struct \u7c7b\u4f3c\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u201c\u70b9\u201d\u7b26\u53f7\u8bbf\u95ee\u5143\u7d20\u5185\u5bb9\u3002\u4f8b\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u5217\u7684\u6570\u636e\u7c7b\u578b\u662f STRUCT{first STRING,last STRING},\u90a3\u4e48\u7b2c 1 \u4e2a\u5143\u7d20\u53ef\u4ee5\u901a\u8fc7\u5b57\u6bb5.first \u6765\u5f15\u7528 UNIONTYPE Hive 0.7.0 \u4e2d\u5f15\u5165\u4e86 UNIONTYPE \u6570\u636e\u7c7b\u578b\uff0c\u4f46\u662f\u5728 Hive \u4e2d\u5bf9\u6b64\u7c7b\u578b\u7684\u5b8c\u5168\u652f\u6301\u4ecd\u7136\u4e0d\u5b8c\u6574"},{"location":"blog/2024/04/09/hive/#_4","title":"\u5173\u7cfb\u8fd0\u7b97","text":""},{"location":"blog/2024/04/09/hive/#1","title":"1\u3001\u7b49\u503c\u6bd4\u8f83: =","text":"<p>\u8bed\u6cd5\uff1a<code>A=B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u57fa\u672c\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u4e0e\u8868\u8fbe\u5f0fB\u76f8\u7b49\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 1=1;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2","title":"2\u3001\u4e0d\u7b49\u503c\u6bd4\u8f83: &lt;&gt;","text":"<p>\u8bed\u6cd5: <code>A &lt;&gt; B</code> \u64cd\u4f5c\u7c7b\u578b: \u6240\u6709\u57fa\u672c\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u4e3aNULL\uff0c\u6216\u8005\u8868\u8fbe\u5f0fB\u4e3aNULL\uff0c\u8fd4\u56deNULL\uff1b\u5982\u679c\u8868\u8fbe\u5f0fA\u4e0e\u8868\u8fbe\u5f0fB\u4e0d\u76f8\u7b49\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 1 &lt;&gt; 2;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3","title":"3\u3001\u5c0f\u4e8e\u6bd4\u8f83: &lt;","text":"<p>\u8bed\u6cd5: <code>A &lt; B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u57fa\u672c\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u4e3aNULL\uff0c\u6216\u8005\u8868\u8fbe\u5f0fB\u4e3aNULL\uff0c\u8fd4\u56deNULL\uff1b\u5982\u679c\u8868\u8fbe\u5f0fA\u5c0f\u4e8e\u8868\u8fbe\u5f0fB\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 1 &lt; 2;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4","title":"4\u3001\u5c0f\u4e8e\u7b49\u4e8e\u6bd4\u8f83: &lt;=","text":"<p>\u8bed\u6cd5: <code>A &lt;= B</code> \u64cd\u4f5c\u7c7b\u578b: \u6240\u6709\u57fa\u672c\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u4e3aNULL\uff0c\u6216\u8005\u8868\u8fbe\u5f0fB\u4e3aNULL\uff0c\u8fd4\u56deNULL\uff1b\u5982\u679c\u8868\u8fbe\u5f0fA\u5c0f\u4e8e\u6216\u8005\u7b49\u4e8e\u8868\u8fbe\u5f0fB\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 1 &lt; = 1;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#5","title":"5\u3001\u5927\u4e8e\u6bd4\u8f83: &gt;","text":"<p>\u8bed\u6cd5: <code>A &gt; B</code> \u64cd\u4f5c\u7c7b\u578b: \u6240\u6709\u57fa\u672c\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u4e3aNULL\uff0c\u6216\u8005\u8868\u8fbe\u5f0fB\u4e3aNULL\uff0c\u8fd4\u56deNULL\uff1b\u5982\u679c\u8868\u8fbe\u5f0fA\u5927\u4e8e\u8868\u8fbe\u5f0fB\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 2 &gt; 1;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#6","title":"6\u3001\u5927\u4e8e\u7b49\u4e8e\u6bd4\u8f83: &gt;=","text":"<p>\u8bed\u6cd5: <code>A &gt;= B</code> \u64cd\u4f5c\u7c7b\u578b: \u6240\u6709\u57fa\u672c\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u4e3aNULL\uff0c\u6216\u8005\u8868\u8fbe\u5f0fB\u4e3aNULL\uff0c\u8fd4\u56deNULL\uff1b\u5982\u679c\u8868\u8fbe\u5f0fA\u5927\u4e8e\u6216\u8005\u7b49\u4e8e\u8868\u8fbe\u5f0fB\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 1 &gt;= 1;\n1\n</code></pre> \u6ce8\u610f\uff1aString \u7684\u6bd4\u8f83\u8981\u6ce8\u610f(\u5e38\u7528\u7684\u65f6\u95f4\u6bd4\u8f83\u53ef\u4ee5\u5148 to_date \u4e4b\u540e\u518d\u6bd4\u8f83) <pre><code>hive&gt; select * from iteblog;\nOK\n2011111209 00:00:00     2011111209\n\nhive&gt; select a, b, a&lt;b, a&gt;b, a=b from iteblog;\n2011111209 00:00:00     2011111209      false   true    false\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#7-is-null","title":"7\u3001\u7a7a\u503c\u5224\u65ad: IS NULL","text":"<p>\u8bed\u6cd5: <code>A IS NULL</code> \u64cd\u4f5c\u7c7b\u578b: \u6240\u6709\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u7684\u503c\u4e3aNULL\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where null is null;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#8-is-not-null","title":"8\u3001\u975e\u7a7a\u5224\u65ad: IS NOT NULL","text":"<p>\u8bed\u6cd5: <code>A IS NOT NULL</code> \u64cd\u4f5c\u7c7b\u578b: \u6240\u6709\u7c7b\u578b \u63cf\u8ff0: \u5982\u679c\u8868\u8fbe\u5f0fA\u7684\u503c\u4e3aNULL\uff0c\u5219\u4e3aFALSE\uff1b\u5426\u5219\u4e3aTRUE <pre><code>hive&gt; select 1 from iteblog where 1 is not null;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#9like-like","title":"9\u3001LIKE\u6bd4\u8f83: LIKE","text":"<p>\u8bed\u6cd5: <code>A LIKE B</code> \u64cd\u4f5c\u7c7b\u578b: strings \u63cf\u8ff0: \u5982\u679c\u5b57\u7b26\u4e32A\u6216\u8005\u5b57\u7b26\u4e32B\u4e3aNULL\uff0c\u5219\u8fd4\u56deNULL\uff1b\u5982\u679c\u5b57\u7b26\u4e32A\u7b26\u5408\u8868\u8fbe\u5f0fB \u7684\u6b63\u5219\u8bed\u6cd5\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE\u3002B\u4e2d\u5b57\u7b26\u201d_\u201d\u8868\u793a\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\uff0c\u800c\u5b57\u7b26\u201d%\u201d\u8868\u793a\u4efb\u610f\u6570\u91cf\u7684\u5b57\u7b26\u3002 <pre><code>hive&gt; select 1 from iteblog where 'football' like 'foot%';\n1\nhive&gt; select 1 from iteblog where 'football' like 'foot____';\n1\n\n//\u6ce8\u610f\uff1a\u5426\u5b9a\u6bd4\u8f83\u65f6\u5019\u7528NOT A LIKE B\nhive&gt; select 1 from iteblog where NOT 'football' like 'fff%';\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#10javalike-rlike","title":"10\u3001JAVA\u7684LIKE\u64cd\u4f5c: RLIKE","text":"<p>\u8bed\u6cd5: <code>A RLIKE B</code> \u64cd\u4f5c\u7c7b\u578b: strings \u63cf\u8ff0: \u5982\u679c\u5b57\u7b26\u4e32A\u6216\u8005\u5b57\u7b26\u4e32B\u4e3aNULL\uff0c\u5219\u8fd4\u56deNULL\uff1b\u5982\u679c\u5b57\u7b26\u4e32A\u7b26\u5408JAVA\u6b63\u5219\u8868\u8fbe\u5f0fB\u7684\u6b63\u5219\u8bed\u6cd5\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE\u3002 <pre><code>hive&gt; select 1 from iteblog where 'footbar\u2019 rlike '^f.*r$\u2019;\n1\n</code></pre> \u6ce8\u610f\uff1a\u5224\u65ad\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u5168\u4e3a\u6570\u5b57\uff1a <pre><code>hive&gt; select 1 from iteblog where '123456' rlike '^\\\\d+$';\n1\nhive&gt; select 1 from iteblog where '123456aa' rlike '^\\\\d+$';\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#11regexp-regexp","title":"11\u3001REGEXP\u64cd\u4f5c: REGEXP","text":"<p>\u8bed\u6cd5: <code>A REGEXP B</code> \u64cd\u4f5c\u7c7b\u578b: strings \u63cf\u8ff0: \u529f\u80fd\u4e0eRLIKE\u76f8\u540c <pre><code>hive&gt; select 1 from iteblog where 'footbar' REGEXP '^f.*r$';\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_5","title":"\u6570\u5b66\u8fd0\u7b97","text":""},{"location":"blog/2024/04/09/hive/#1_1","title":"1\u3001\u52a0\u6cd5\u64cd\u4f5c: +","text":"<p>\u8bed\u6cd5: <code>A + B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u4e0eB\u76f8\u52a0\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002\u6bd4\u5982\uff0cint + int \u4e00\u822c\u7ed3\u679c\u4e3aint\u7c7b\u578b\uff0c\u800c int + double \u4e00\u822c\u7ed3\u679c\u4e3adouble\u7c7b\u578b <pre><code>hive&gt; select 1 + 9 from iteblog;\n10\nhive&gt; create table iteblog as select 1 + 1.2 from iteblog;\nhive&gt; describe iteblog;\n_c0     double\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2-","title":"2\u3001\u51cf\u6cd5\u64cd\u4f5c: -","text":"<p>\u8bed\u6cd5: <code>A \u2013 B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u4e0eB\u76f8\u51cf\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002\u6bd4\u5982\uff0cint \u2013 int \u4e00\u822c\u7ed3\u679c\u4e3aint\u7c7b\u578b\uff0c\u800c int \u2013 double \u4e00\u822c\u7ed3\u679c\u4e3adouble\u7c7b\u578b <pre><code>hive&gt; select 10 \u2013 5 from iteblog;\n5\nhive&gt; create table iteblog as select 5.6 \u2013 4 from iteblog;\nhive&gt; describe iteblog;\n_c0     double\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3_1","title":"3\u3001\u4e58\u6cd5\u64cd\u4f5c: *","text":"<p>\u8bed\u6cd5: <code>A * B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u4e0eB\u76f8\u4e58\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002\u6ce8\u610f\uff0c\u5982\u679cA\u4e58\u4ee5B\u7684\u7ed3\u679c\u8d85\u8fc7\u9ed8\u8ba4\u7ed3\u679c\u7c7b\u578b\u7684\u6570\u503c\u8303\u56f4\uff0c\u5219\u9700\u8981\u901a\u8fc7cast\u5c06\u7ed3\u679c\u8f6c\u6362\u6210\u8303\u56f4\u66f4\u5927\u7684\u6570\u503c\u7c7b\u578b <pre><code>hive&gt; select 40 * 5 from iteblog;\n200\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4_1","title":"4\u3001\u9664\u6cd5\u64cd\u4f5c: /","text":"<p>\u8bed\u6cd5: <code>A / B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u9664\u4ee5B\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u4e3adouble <pre><code>hive&gt; select 40 / 5 from iteblog;\n8.0\n</code></pre> \u6ce8\u610f\uff1ahive\u4e2d\u6700\u9ad8\u7cbe\u5ea6\u7684\u6570\u636e\u7c7b\u578b\u662fdouble,\u53ea\u7cbe\u786e\u5230\u5c0f\u6570\u70b9\u540e16\u4f4d\uff0c\u5728\u505a\u9664\u6cd5\u8fd0\u7b97\u7684\u65f6\u5019\u8981\u7279\u522b\u6ce8\u610f <pre><code>hive&gt;select ceil(28.0/6.999999999999999999999) from iteblog limit 1;    \n\u7ed3\u679c\u4e3a4\nhive&gt;select ceil(28.0/6.99999999999999) from iteblog limit 1;           \n\u7ed3\u679c\u4e3a5\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#5_1","title":"5\u3001\u53d6\u4f59\u64cd\u4f5c: %","text":"<p>\u8bed\u6cd5: <code>A % B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u9664\u4ee5B\u7684\u4f59\u6570\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002 <pre><code>hive&gt; select 41 % 5 from iteblog;\n1\nhive&gt; select 8.4 % 4 from iteblog;\n0.40000000000000036\n</code></pre> \u6ce8\u610f\uff1a\u7cbe\u5ea6\u5728hive\u4e2d\u662f\u4e2a\u5f88\u5927\u7684\u95ee\u9898\uff0c\u7c7b\u4f3c\u8fd9\u6837\u7684\u64cd\u4f5c\u6700\u597d\u901a\u8fc7round\u6307\u5b9a\u7cbe\u5ea6 <pre><code>hive&gt; select round(8.4 % 4 , 2) from iteblog;\n0.4\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#6_1","title":"6\u3001\u4f4d\u4e0e\u64cd\u4f5c: &amp;","text":"<p>\u8bed\u6cd5: <code>A &amp; B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u548cB\u6309\u4f4d\u8fdb\u884c\u4e0e\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002 <pre><code>hive&gt; select 4 &amp; 8 from iteblog;\n0\nhive&gt; select 6 &amp; 4 from iteblog;\n4\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#7","title":"7\u3001\u4f4d\u6216\u64cd\u4f5c: |","text":"<p>\u8bed\u6cd5: <code>A | B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u548cB\u6309\u4f4d\u8fdb\u884c\u6216\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002 <pre><code>hive&gt; select 4 | 8 from iteblog;\n12\nhive&gt; select 6 | 8 from iteblog;\n14\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#8","title":"8\u3001\u4f4d\u5f02\u6216\u64cd\u4f5c: ^","text":"<p>\u8bed\u6cd5: <code>A ^ B</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u548cB\u6309\u4f4d\u8fdb\u884c\u5f02\u6216\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u548cB\u7684\u7c7b\u578b\u7684\u6700\u5c0f\u7236\u7c7b\u578b\uff08\u8be6\u89c1\u6570\u636e\u7c7b\u578b\u7684\u7ee7\u627f\u5173\u7cfb\uff09\u3002 <pre><code>hive&gt; select 4 ^ 8 from iteblog;\n12\nhive&gt; select 6 ^ 4 from iteblog;\n2\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#9","title":"9\uff0e\u4f4d\u53d6\u53cd\u64cd\u4f5c: ~","text":"<p>\u8bed\u6cd5: <code>~A</code> \u64cd\u4f5c\u7c7b\u578b\uff1a\u6240\u6709\u6570\u503c\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56deA\u6309\u4f4d\u53d6\u53cd\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u7ed3\u679c\u7684\u6570\u503c\u7c7b\u578b\u7b49\u4e8eA\u7684\u7c7b\u578b\u3002 <pre><code>hive&gt; select ~6 from iteblog;\n-7\nhive&gt; select ~4 from iteblog;\n-5\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_6","title":"\u903b\u8f91\u8fd0\u7b97","text":""},{"location":"blog/2024/04/09/hive/#1-and","title":"1\u3001\u903b\u8f91\u4e0e\u64cd\u4f5c: AND","text":"<p>\u8bed\u6cd5: <code>A AND B</code> \u64cd\u4f5c\u7c7b\u578b\uff1aboolean \u8bf4\u660e\uff1a\u5982\u679cA\u548cB\u5747\u4e3aTRUE\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE\u3002\u5982\u679cA\u4e3aNULL\u6216B\u4e3aNULL\uff0c\u5219\u4e3aNULL <pre><code>hive&gt; select 1 from iteblog where 1=1 and 2=2;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2-or","title":"2\u3001\u903b\u8f91\u6216\u64cd\u4f5c: OR","text":"<p>\u8bed\u6cd5: <code>A OR B</code> \u64cd\u4f5c\u7c7b\u578b\uff1aboolean \u8bf4\u660e\uff1a\u5982\u679cA\u4e3aTRUE\uff0c\u6216\u8005B\u4e3aTRUE\uff0c\u6216\u8005A\u548cB\u5747\u4e3aTRUE\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where 1=2 or 2=2;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3-not","title":"3\u3001\u903b\u8f91\u975e\u64cd\u4f5c: NOT","text":"<p>\u8bed\u6cd5: <code>NOT A</code> \u64cd\u4f5c\u7c7b\u578b\uff1aboolean \u8bf4\u660e\uff1a\u5982\u679cA\u4e3aFALSE\uff0c\u6216\u8005A\u4e3aNULL\uff0c\u5219\u4e3aTRUE\uff1b\u5426\u5219\u4e3aFALSE <pre><code>hive&gt; select 1 from iteblog where not 1=2;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_7","title":"\u6570\u503c\u8ba1\u7b97","text":""},{"location":"blog/2024/04/09/hive/#1-round","title":"1\u3001\u53d6\u6574\u51fd\u6570: round","text":"<p>\u8bed\u6cd5: <code>round(double a)</code> \u8fd4\u56de\u503c: BIGINT \u8bf4\u660e: \u8fd4\u56dedouble\u7c7b\u578b\u7684\u6574\u6570\u503c\u90e8\u5206 \uff08\u9075\u5faa\u56db\u820d\u4e94\u5165\uff09 <pre><code>hive&gt; select round(3.1415926) from iteblog;\n3\nhive&gt; select round(3.5) from iteblog;\n4\nhive&gt; create table iteblog as select round(9542.158) from iteblog;\nhive&gt; describe iteblog;\n_c0     bigint\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2-round","title":"2\u3001\u6307\u5b9a\u7cbe\u5ea6\u53d6\u6574\u51fd\u6570: round","text":"<p>\u8bed\u6cd5: <code>round(double a, int d)</code> \u8fd4\u56de\u503c: DOUBLE \u8bf4\u660e: \u8fd4\u56de\u6307\u5b9a\u7cbe\u5ea6d\u7684double\u7c7b\u578b <pre><code>hive&gt; select round(3.1415926,4) from iteblog;\n3.1416\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3-floor","title":"3\u3001\u5411\u4e0b\u53d6\u6574\u51fd\u6570: floor","text":"<p>\u8bed\u6cd5: <code>floor(double a)</code> \u8fd4\u56de\u503c: BIGINT \u8bf4\u660e: \u8fd4\u56de\u7b49\u4e8e\u6216\u8005\u5c0f\u4e8e\u8be5double\u53d8\u91cf\u7684\u6700\u5927\u7684\u6574\u6570 <pre><code>hive&gt; select floor(3.1415926) from iteblog;\n3\nhive&gt; select floor(25) from iteblog;\n25\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4-ceil","title":"4\u3001\u5411\u4e0a\u53d6\u6574\u51fd\u6570: ceil","text":"<p>\u8bed\u6cd5: <code>ceil(double a)</code> \u8fd4\u56de\u503c: BIGINT \u8bf4\u660e: \u8fd4\u56de\u7b49\u4e8e\u6216\u8005\u5927\u4e8e\u8be5double\u53d8\u91cf\u7684\u6700\u5c0f\u7684\u6574\u6570 <pre><code>hive&gt; select ceil(3.1415926) from iteblog;\n4\nhive&gt; select ceil(46) from iteblog;\n46\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#5-ceiling","title":"5\u3001\u5411\u4e0a\u53d6\u6574\u51fd\u6570: ceiling","text":"<p>\u8bed\u6cd5: <code>ceiling(double a)</code> \u8fd4\u56de\u503c: BIGINT \u8bf4\u660e: \u4e0eceil\u529f\u80fd\u76f8\u540c <pre><code>hive&gt; select ceiling(3.1415926) from iteblog;\n4\nhive&gt; select ceiling(46) from iteblog;\n46\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#6-rand","title":"6\u3001\u53d6\u968f\u673a\u6570\u51fd\u6570: rand","text":"<p>\u8bed\u6cd5: <code>rand()</code>,<code>rand(int seed)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56de\u4e00\u4e2a0\u52301\u8303\u56f4\u5185\u7684\u968f\u673a\u6570\u3002\u5982\u679c\u6307\u5b9a\u79cd\u5b50seed\uff0c\u5219\u4f1a\u7b49\u5230\u4e00\u4e2a\u7a33\u5b9a\u7684\u968f\u673a\u6570\u5e8f\u5217 <pre><code>hive&gt; select rand() from iteblog;\n0.5577432776034763\nhive&gt; select rand() from iteblog;\n0.6638336467363424\nhive&gt; select rand(100) from iteblog;\n0.7220096548596434\nhive&gt; select rand(100) from iteblog;\n0.7220096548596434\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#7-exp","title":"7\u3001\u81ea\u7136\u6307\u6570\u51fd\u6570: exp","text":"<p>\u8bed\u6cd5: <code>exp(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56de\u81ea\u7136\u5bf9\u6570e\u7684a\u6b21\u65b9 <pre><code>hive&gt; select exp(2) from iteblog;\n7.38905609893065\n&lt;strong&gt;\u81ea\u7136\u5bf9\u6570\u51fd\u6570&lt;/strong&gt;: ln\n&lt;strong&gt;\u8bed\u6cd5&lt;/strong&gt;: ln(double a)\n&lt;strong&gt;\u8fd4\u56de\u503c&lt;/strong&gt;: double\n&lt;strong&gt;\u8bf4\u660e&lt;/strong&gt;: \u8fd4\u56dea\u7684\u81ea\u7136\u5bf9\u6570\n1\nhive&gt; select ln(7.38905609893065) from iteblog;\n2.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#810-log10","title":"8\u3001\u4ee510\u4e3a\u5e95\u5bf9\u6570\u51fd\u6570: log10","text":"<p>\u8bed\u6cd5: <code>log10(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56de\u4ee510\u4e3a\u5e95\u7684a\u7684\u5bf9\u6570 <pre><code>hive&gt; select log10(100) from iteblog;\n2.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#92-log2","title":"9\u3001\u4ee52\u4e3a\u5e95\u5bf9\u6570\u51fd\u6570: log2","text":"<p>\u8bed\u6cd5: <code>log2(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56de\u4ee52\u4e3a\u5e95\u7684a\u7684\u5bf9\u6570 <pre><code>hive&gt; select log2(8) from iteblog;\n3.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#10-log","title":"10\u3001\u5bf9\u6570\u51fd\u6570: log","text":"<p>\u8bed\u6cd5: <code>log(double base, double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56de\u4ee5base\u4e3a\u5e95\u7684a\u7684\u5bf9\u6570 <pre><code>hive&gt; select log(4,256) from iteblog;\n4.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#11-pow","title":"11\u3001\u5e42\u8fd0\u7b97\u51fd\u6570: pow","text":"<p>\u8bed\u6cd5: <code>pow(double a, double p)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684p\u6b21\u5e42 <pre><code>hive&gt; select pow(2,4) from iteblog;\n16.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#12-power","title":"12\u3001\u5e42\u8fd0\u7b97\u51fd\u6570: power","text":"<p>\u8bed\u6cd5: <code>power(double a, double p)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684p\u6b21\u5e42,\u4e0epow\u529f\u80fd\u76f8\u540c <pre><code>hive&gt; select power(2,4) from iteblog;\n16.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#13-sqrt","title":"13\u3001\u5f00\u5e73\u65b9\u51fd\u6570: sqrt","text":"<p>\u8bed\u6cd5: <code>sqrt(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684\u5e73\u65b9\u6839 <pre><code>hive&gt; select sqrt(16) from iteblog;\n4.0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#14-bin","title":"14\u3001\u4e8c\u8fdb\u5236\u51fd\u6570: bin","text":"<p>\u8bed\u6cd5: <code>bin(BIGINT a)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u8fd4\u56dea\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\u8868\u793a <pre><code>hive&gt; select bin(7) from iteblog;\n111\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#15-hex","title":"15\u3001\u5341\u516d\u8fdb\u5236\u51fd\u6570: hex","text":"<p>\u8bed\u6cd5: <code>hex(BIGINT a)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u5982\u679c\u53d8\u91cf\u662fint\u7c7b\u578b\uff0c\u90a3\u4e48\u8fd4\u56dea\u7684\u5341\u516d\u8fdb\u5236\u8868\u793a\uff1b\u5982\u679c\u53d8\u91cf\u662fstring\u7c7b\u578b\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u7684\u5341\u516d\u8fdb\u5236\u8868\u793a <pre><code>hive&gt; select hex(17) from iteblog;\n11\nhive&gt; select hex(\u2018abc\u2019) from iteblog;\n616263\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#16-unhex","title":"16\u3001\u53cd\u8f6c\u5341\u516d\u8fdb\u5236\u51fd\u6570: unhex","text":"<p>\u8bed\u6cd5: <code>unhex(string a)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u8fd4\u56de\u8be5\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u6240\u4ee3\u7801\u7684\u5b57\u7b26\u4e32 <pre><code>hive&gt; select unhex(\u2018616263\u2019) from iteblog;\nabc\nhive&gt; select unhex(\u201811\u2019) from iteblog;\n-\nhive&gt; select unhex(616263) from iteblog;\nabc\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#17-conv","title":"17\u3001\u8fdb\u5236\u8f6c\u6362\u51fd\u6570: conv","text":"<p>\u8bed\u6cd5: <code>conv(BIGINT num, int from_base, int to_base)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u5c06\u6570\u503cnum\u4ecefrom_base\u8fdb\u5236\u8f6c\u5316\u5230to_base\u8fdb\u5236 <pre><code>hive&gt; select conv(17,10,16) from iteblog;\n11\nhive&gt; select conv(17,10,2) from iteblog;\n10001\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#18-abs","title":"18\u3001\u7edd\u5bf9\u503c\u51fd\u6570: abs","text":"<p>\u8bed\u6cd5: <code>abs(double a) abs(int a)</code> \u8fd4\u56de\u503c: double int \u8bf4\u660e: \u8fd4\u56de\u6570\u503ca\u7684\u7edd\u5bf9\u503c <pre><code>hive&gt; select abs(-3.9) from iteblog;\n3.9\nhive&gt; select abs(10.9) from iteblog;\n10.9\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#19-pmod","title":"19\u3001\u6b63\u53d6\u4f59\u51fd\u6570: pmod","text":"<p>\u8bed\u6cd5: <code>pmod(int a, int b),pmod(double a, double b)</code> \u8fd4\u56de\u503c: int double \u8bf4\u660e: \u8fd4\u56de\u6b63\u7684a\u9664\u4ee5b\u7684\u4f59\u6570 <pre><code>hive&gt; select pmod(9,4) from iteblog;\n1\nhive&gt; select pmod(-9,4) from iteblog;\n3\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#20-sin","title":"20\u3001\u6b63\u5f26\u51fd\u6570: sin","text":"<p>\u8bed\u6cd5: <code>sin(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684\u6b63\u5f26\u503c <pre><code>hive&gt; select sin(0.8) from iteblog;\n0.7173560908995228\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#21-asin","title":"21\u3001\u53cd\u6b63\u5f26\u51fd\u6570: asin","text":"<p>\u8bed\u6cd5: <code>asin(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684\u53cd\u6b63\u5f26\u503c <pre><code>hive&gt; select asin(0.7173560908995228) from iteblog;\n0.8\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#22-cos","title":"22\u3001\u4f59\u5f26\u51fd\u6570: cos","text":"<p>\u8bed\u6cd5: <code>cos(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684\u4f59\u5f26\u503c <pre><code>hive&gt; select cos(0.9) from iteblog;\n0.6216099682706644\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#23-acos","title":"23\u3001\u53cd\u4f59\u5f26\u51fd\u6570: acos","text":"<p>\u8bed\u6cd5: <code>acos(double a)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8fd4\u56dea\u7684\u53cd\u4f59\u5f26\u503c <pre><code>hive&gt; select acos(0.6216099682706644) from iteblog;\n0.9\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#24positive-positive","title":"24\u3001positive\u51fd\u6570: positive","text":"<p>\u8bed\u6cd5: <code>positive(int a)</code>, <code>positive(double a)</code> \u8fd4\u56de\u503c: int double \u8bf4\u660e: \u8fd4\u56dea <pre><code>hive&gt; select positive(-10) from iteblog;\n-10\nhive&gt; select positive(12) from iteblog;\n12\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#25negative-negative","title":"25\u3001negative\u51fd\u6570: negative","text":"<p>\u8bed\u6cd5: <code>negative(int a)</code>, <code>negative(double a)</code> \u8fd4\u56de\u503c: int double \u8bf4\u660e: \u8fd4\u56de-a <pre><code>hive&gt; select negative(-5) from iteblog;\n5\nhive&gt; select negative(8) from iteblog;\n-8\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_8","title":"\u65e5\u671f\u51fd\u6570","text":""},{"location":"blog/2024/04/09/hive/#1unix-from_unixtime","title":"1\u3001UNIX\u65f6\u95f4\u6233\u8f6c\u65e5\u671f\u51fd\u6570: from_unixtime","text":"<p>\u8bed\u6cd5: <code>from_unixtime(bigint unixtime[, string format])</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u8f6c\u5316UNIX\u65f6\u95f4\u6233\uff08\u4ece1970-01-01 00:00:00 UTC\u5230\u6307\u5b9a\u65f6\u95f4\u7684\u79d2\u6570\uff09\u5230\u5f53\u524d\u65f6\u533a\u7684\u65f6\u95f4\u683c\u5f0f <pre><code>hive&gt; select from_unixtime(1323308943,'yyyyMMdd') from iteblog;\n20111208\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2unix-unix_timestamp","title":"2\u3001\u83b7\u53d6\u5f53\u524dUNIX\u65f6\u95f4\u6233\u51fd\u6570: unix_timestamp","text":"<p>\u8bed\u6cd5: <code>unix_timestamp()</code> \u8fd4\u56de\u503c: bigint \u8bf4\u660e: \u83b7\u5f97\u5f53\u524d\u65f6\u533a\u7684UNIX\u65f6\u95f4\u6233 <pre><code>hive&gt; select unix_timestamp() from iteblog;\n1323309615\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3unix-unix_timestamp","title":"3\u3001\u65e5\u671f\u8f6cUNIX\u65f6\u95f4\u6233\u51fd\u6570: unix_timestamp","text":"<p>\u8bed\u6cd5: <code>unix_timestamp(string date)</code> \u8fd4\u56de\u503c: bigint \u8bf4\u660e: \u8f6c\u6362\u683c\u5f0f\u4e3a\"1970-01-01 00:00:00\"\u7684\u65e5\u671f\u5230UNIX\u65f6\u95f4\u6233\u3002\u5982\u679c\u8f6c\u5316\u5931\u8d25\uff0c\u5219\u8fd4\u56de0\u3002 <pre><code>hive&gt; select unix_timestamp('2011-12-07 13:01:03') from iteblog;\n1323234063\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4unix-unix_timestamp","title":"4\u3001\u6307\u5b9a\u683c\u5f0f\u65e5\u671f\u8f6cUNIX\u65f6\u95f4\u6233\u51fd\u6570: unix_timestamp","text":"<p>\u8bed\u6cd5: <code>unix_timestamp(string date, string pattern)</code> \u8fd4\u56de\u503c: bigint \u8bf4\u660e: \u8f6c\u6362pattern\u683c\u5f0f\u7684\u65e5\u671f\u5230UNIX\u65f6\u95f4\u6233\u3002\u5982\u679c\u8f6c\u5316\u5931\u8d25\uff0c\u5219\u8fd4\u56de0\u3002 <pre><code>hive&gt; select unix_timestamp('20111207 13:01:03','yyyyMMdd HH:mm:ss') from iteblog;\n1323234063\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#5-to_date","title":"5\u3001\u65e5\u671f\u65f6\u95f4\u8f6c\u65e5\u671f\u51fd\u6570: to_date","text":"<p>\u8bed\u6cd5: <code>to_date(string timestamp)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u65f6\u95f4\u5b57\u6bb5\u4e2d\u7684\u65e5\u671f\u90e8\u5206\u3002 <pre><code>hive&gt; select to_date('2011-12-08 10:03:01') from iteblog;\n2011-12-08\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#6-year","title":"6\u3001\u65e5\u671f\u8f6c\u5e74\u51fd\u6570: year","text":"<p>\u8bed\u6cd5: <code>year(string date)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u4e2d\u7684\u5e74\u3002 <pre><code>hive&gt; select year('2011-12-08 10:03:01') from iteblog;\n2011\nhive&gt; select year('2012-12-08') from iteblog;\n2012\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#7-month","title":"7\u3001\u65e5\u671f\u8f6c\u6708\u51fd\u6570: month","text":"<p>\u8bed\u6cd5: <code>month (string date)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u4e2d\u7684\u6708\u4efd\u3002 <pre><code>hive&gt; select month('2011-12-08 10:03:01') from iteblog;\n12\nhive&gt; select month('2011-08-08') from iteblog;\n8\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#8-day","title":"8\u3001\u65e5\u671f\u8f6c\u5929\u51fd\u6570: day","text":"<p>\u8bed\u6cd5: <code>day (string date)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u4e2d\u7684\u5929\u3002 <pre><code>hive&gt; select day('2011-12-08 10:03:01') from iteblog;\n8\nhive&gt; select day('2011-12-24') from iteblog;\n24\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#9-hour","title":"9\u3001\u65e5\u671f\u8f6c\u5c0f\u65f6\u51fd\u6570: hour","text":"<p>\u8bed\u6cd5: <code>hour (string date)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u4e2d\u7684\u5c0f\u65f6\u3002 <pre><code>hive&gt; select hour('2011-12-08 10:03:01') from iteblog;\n10\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#10-minute","title":"10\u3001\u65e5\u671f\u8f6c\u5206\u949f\u51fd\u6570: minute","text":"<p>\u8bed\u6cd5: <code>minute (string date)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u4e2d\u7684\u5206\u949f\u3002 <pre><code>hive&gt; select minute('2011-12-08 10:03:01') from iteblog;\n3\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#11-second","title":"11\u3001\u65e5\u671f\u8f6c\u79d2\u51fd\u6570: second","text":"<p>\u8bed\u6cd5: <code>second (string date)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u4e2d\u7684\u79d2\u3002 <pre><code>hive&gt; select second('2011-12-08 10:03:01') from iteblog;\n1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#12-weekofyear","title":"12\u3001\u65e5\u671f\u8f6c\u5468\u51fd\u6570: weekofyear","text":"<p>\u8bed\u6cd5: <code>weekofyear (string date)</code> \u8fd4\u56de\u503c: <code>int</code> \u8bf4\u660e: \u8fd4\u56de\u65e5\u671f\u5728\u5f53\u524d\u7684\u5468\u6570\u3002 <pre><code>hive&gt; select weekofyear('2011-12-08 10:03:01') from iteblog;\n49\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#13-datediff","title":"13\u3001\u65e5\u671f\u6bd4\u8f83\u51fd\u6570: datediff","text":"<p>\u8bed\u6cd5: <code>datediff(string enddate, string startdate)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56de\u7ed3\u675f\u65e5\u671f\u51cf\u53bb\u5f00\u59cb\u65e5\u671f\u7684\u5929\u6570\u3002 <pre><code>hive&gt; select datediff('2012-12-08','2012-05-09') from iteblog;\n213\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#14-date_add","title":"14\u3001\u65e5\u671f\u589e\u52a0\u51fd\u6570: date_add","text":"<p>\u8bed\u6cd5: <code>date_add(string startdate, int days)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u8fd4\u56de\u5f00\u59cb\u65e5\u671fstartdate\u589e\u52a0days\u5929\u540e\u7684\u65e5\u671f\u3002 <pre><code>hive&gt; select date_add('2012-12-08',10) from iteblog;\n2012-12-18\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#15-date_sub","title":"15\u3001\u65e5\u671f\u51cf\u5c11\u51fd\u6570: date_sub","text":"<p>\u8bed\u6cd5: <code>date_sub (string startdate, int days)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e: \u8fd4\u56de\u5f00\u59cb\u65e5\u671fstartdate\u51cf\u5c11days\u5929\u540e\u7684\u65e5\u671f\u3002 <pre><code>hive&gt; select date_sub('2012-12-08',10) from iteblog;\n2012-11-28\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_9","title":"\u6761\u4ef6\u51fd\u6570","text":""},{"location":"blog/2024/04/09/hive/#1if-if","title":"1\u3001If\u51fd\u6570: if","text":"<p>\u8bed\u6cd5: <code>if(boolean testCondition, T valueTrue, T valueFalseOrNull)</code> \u8fd4\u56de\u503c: T \u8bf4\u660e: \u5f53\u6761\u4ef6testCondition\u4e3aTRUE\u65f6\uff0c\u8fd4\u56devalueTrue\uff1b\u5426\u5219\u8fd4\u56devalueFalseOrNull <pre><code>hive&gt; select if(1=2,100,200) from iteblog;\n200\nhive&gt; select if(1=1,100,200) from iteblog;\n100\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2-coalesce","title":"2\u3001\u975e\u7a7a\u67e5\u627e\u51fd\u6570: COALESCE","text":"<p>\u8bed\u6cd5: <code>COALESCE(T v1, T v2, \u2026)</code> \u8fd4\u56de\u503c: T \u8bf4\u660e: \u8fd4\u56de\u53c2\u6570\u4e2d\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u503c\uff1b\u5982\u679c\u6240\u6709\u503c\u90fd\u4e3aNULL\uff0c\u90a3\u4e48\u8fd4\u56deNULL <pre><code>hive&gt; select COALESCE(null,'100','50\u2032) from iteblog;\n100\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3case","title":"3\u3001\u6761\u4ef6\u5224\u65ad\u51fd\u6570\uff1aCASE","text":"<p>\u8bed\u6cd5: <code>CASE a WHEN b THEN c [WHEN d THEN e]* [ELSE f] END</code> \u8fd4\u56de\u503c: T \u8bf4\u660e\uff1a\u5982\u679ca\u7b49\u4e8eb\uff0c\u90a3\u4e48\u8fd4\u56dec\uff1b\u5982\u679ca\u7b49\u4e8ed\uff0c\u90a3\u4e48\u8fd4\u56dee\uff1b\u5426\u5219\u8fd4\u56def <pre><code>hive&gt; Select case 100 when 50 then 'tom' when 100 then 'mary' else 'tim' end from iteblog;\nmary\nhive&gt; Select case 200 when 50 then 'tom' when 100 then 'mary' else 'tim' end from iteblog;\ntim\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4case","title":"4\u3001\u6761\u4ef6\u5224\u65ad\u51fd\u6570\uff1aCASE","text":"<p>\u8bed\u6cd5: <code>CASE WHEN a THEN b [WHEN c THEN d]* [ELSE e] END</code> \u8fd4\u56de\u503c: T \u8bf4\u660e\uff1a\u5982\u679ca\u4e3aTRUE,\u5219\u8fd4\u56deb\uff1b\u5982\u679cc\u4e3aTRUE\uff0c\u5219\u8fd4\u56ded\uff1b\u5426\u5219\u8fd4\u56dee <pre><code>hive&gt; select case when 1=2 then 'tom' when 2=2 then 'mary' else 'tim' end from iteblog;\nmary\nhive&gt; select case when 1=1 then 'tom' when 2=2 then 'mary' else 'tim' end from iteblog;\ntom\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_10","title":"\u5b57\u7b26\u4e32\u51fd\u6570","text":""},{"location":"blog/2024/04/09/hive/#1length","title":"1\u3001\u5b57\u7b26\u4e32\u957f\u5ea6\u51fd\u6570\uff1alength","text":"<p>\u8bed\u6cd5: <code>length(string A)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32A\u7684\u957f\u5ea6 <pre><code>hive&gt; select length('abcedfg') from iteblog;\n7\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2reverse","title":"2\u3001\u5b57\u7b26\u4e32\u53cd\u8f6c\u51fd\u6570\uff1areverse","text":"<p>\u8bed\u6cd5: <code>reverse(string A)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32A\u7684\u53cd\u8f6c\u7ed3\u679c <pre><code>hive&gt; select reverse(abcedfg\u2019) from iteblog;\ngfdecba\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3concat","title":"3\u3001\u5b57\u7b26\u4e32\u8fde\u63a5\u51fd\u6570\uff1aconcat","text":"<p>\u8bed\u6cd5: <code>concat(string A, string B\u2026)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u8f93\u5165\u5b57\u7b26\u4e32\u8fde\u63a5\u540e\u7684\u7ed3\u679c\uff0c\u652f\u6301\u4efb\u610f\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32 <pre><code>hive&gt; select concat(\u2018abc\u2019,'def\u2019,'gh\u2019) from iteblog;\nabcdefgh\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4concat_ws","title":"4\u3001\u5e26\u5206\u9694\u7b26\u5b57\u7b26\u4e32\u8fde\u63a5\u51fd\u6570\uff1aconcat_ws","text":"<p>\u8bed\u6cd5: <code>concat_ws(string SEP, string A, string B\u2026)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u8f93\u5165\u5b57\u7b26\u4e32\u8fde\u63a5\u540e\u7684\u7ed3\u679c\uff0cSEP\u8868\u793a\u5404\u4e2a\u5b57\u7b26\u4e32\u95f4\u7684\u5206\u9694\u7b26 <pre><code>hive&gt; select concat_ws(',','abc','def','gh') from iteblog;\nabc,def,gh\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#5substrsubstring","title":"5\u3001\u5b57\u7b26\u4e32\u622a\u53d6\u51fd\u6570\uff1asubstr,substring","text":"<p>\u8bed\u6cd5: <code>substr(string A, int start)</code>,<code>substring(string A, int start)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32A\u4ecestart\u4f4d\u7f6e\u5230\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32 <pre><code>hive&gt; select substr('abcde',3) from iteblog;\ncde\nhive&gt; select substring('abcde',3) from iteblog;\ncde\nhive&gt;  select substr('abcde',-1) from iteblog;  \uff08\u548cORACLE\u76f8\u540c\uff09\ne\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#6substrsubstring","title":"6\u3001\u5b57\u7b26\u4e32\u622a\u53d6\u51fd\u6570\uff1asubstr,substring","text":"<p>\u8bed\u6cd5: <code>substr(string A, int start, int len)</code>,<code>substring(string A, int start, int len)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32A\u4ecestart\u4f4d\u7f6e\u5f00\u59cb\uff0c\u957f\u5ea6\u4e3alen\u7684\u5b57\u7b26\u4e32 <pre><code>hive&gt; select substr('abcde',3,2) from iteblog;\ncd\nhive&gt; select substring('abcde',3,2) from iteblog;\ncd\nhive&gt;select substring('abcde',-2,2) from iteblog;\nde\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#7upperucase","title":"7\u3001\u5b57\u7b26\u4e32\u8f6c\u5927\u5199\u51fd\u6570\uff1aupper,ucase","text":"<p>\u8bed\u6cd5: <code>upper(string A)</code>, <code>ucase(string A)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32A\u7684\u5927\u5199\u683c\u5f0f <pre><code>hive&gt; select upper('abSEd') from iteblog;\nABSED\nhive&gt; select ucase('abSEd') from iteblog;\nABSED\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#8lowerlcase","title":"8\u3001\u5b57\u7b26\u4e32\u8f6c\u5c0f\u5199\u51fd\u6570\uff1alower,lcase","text":"<p>\u8bed\u6cd5: <code>lower(string A)</code>,<code>lcase(string A)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32A\u7684\u5c0f\u5199\u683c\u5f0f <pre><code>hive&gt; select lower('abSEd') from iteblog;\nabsed\nhive&gt; select lcase('abSEd') from iteblog;\nabsed\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#9trim","title":"9\u3001\u53bb\u7a7a\u683c\u51fd\u6570\uff1atrim","text":"<p>\u8bed\u6cd5: <code>trim(string A)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u53bb\u9664\u5b57\u7b26\u4e32\u4e24\u8fb9\u7684\u7a7a\u683c <pre><code>hive&gt; select trim(' abc ') from iteblog;\nabc\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#10ltrim","title":"10\u3001\u5de6\u8fb9\u53bb\u7a7a\u683c\u51fd\u6570\uff1altrim","text":"<p>\u8bed\u6cd5: <code>ltrim(string A)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u53bb\u9664\u5b57\u7b26\u4e32\u5de6\u8fb9\u7684\u7a7a\u683c <pre><code>hive&gt; select ltrim(' abc ') from iteblog;\nabc\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#11rtrim","title":"11\u3001\u53f3\u8fb9\u53bb\u7a7a\u683c\u51fd\u6570\uff1artrim","text":"<p>\u8bed\u6cd5: <code>rtrim(string A)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u53bb\u9664\u5b57\u7b26\u4e32\u53f3\u8fb9\u7684\u7a7a\u683c <pre><code>hive&gt; select rtrim(' abc ') from iteblog;\nabc\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#12regexp_replace","title":"12\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u66ff\u6362\u51fd\u6570\uff1aregexp_replace","text":"<p>\u8bed\u6cd5: <code>regexp_replace(string A, string B, string C)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u5c06\u5b57\u7b26\u4e32A\u4e2d\u7684\u7b26\u5408java\u6b63\u5219\u8868\u8fbe\u5f0fB\u7684\u90e8\u5206\u66ff\u6362\u4e3aC\u3002\u6ce8\u610f\uff0c\u5728\u6709\u4e9b\u60c5\u51b5\u4e0b\u8981\u4f7f\u7528\u8f6c\u4e49\u5b57\u7b26,\u7c7b\u4f3coracle\u4e2d\u7684regexp_replace\u51fd\u6570\u3002 <pre><code>hive&gt; select regexp_replace('foobar', 'oo|ar', '') from iteblog;\nfb\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#13regexp_extract","title":"13\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u51fd\u6570\uff1aregexp_extract","text":"<p>\u8bed\u6cd5: <code>regexp_extract(string subject, string pattern, int index)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u5c06\u5b57\u7b26\u4e32subject\u6309\u7167pattern\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u89c4\u5219\u62c6\u5206\uff0c\u8fd4\u56deindex\u6307\u5b9a\u7684\u5b57\u7b26\u3002 <pre><code>hive&gt; select regexp_extract('foothebar', 'foo(.*?)(bar)', 1) from iteblog;\nthe\nhive&gt; select regexp_extract('foothebar', 'foo(.*?)(bar)', 2) from iteblog;\nbar\nhive&gt; select regexp_extract('foothebar', 'foo(.*?)(bar)', 0) from iteblog;\nfoothebar\n</code></pre> \u6ce8\u610f\uff0c\u5728\u6709\u4e9b\u60c5\u51b5\u4e0b\u8981\u4f7f\u7528\u8f6c\u4e49\u5b57\u7b26\uff0c\u4e0b\u9762\u7684\u7b49\u53f7\u8981\u7528\u53cc\u7ad6\u7ebf\u8f6c\u4e49\uff0c\u8fd9\u662fjava\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u89c4\u5219\u3002 <pre><code>hive&gt; select data_field,\n regexp_extract(data_field,'.*?bgStart\\\\=([^&amp;]+)',1) as aaa,\nregexp_extract(data_field,'.*?contentLoaded_headStart\\\\=([^&amp;]+)',1) as bbb,\nregexp_extract(data_field,'.*?AppLoad2Req\\\\=([^&amp;]+)',1) as ccc \nfrom pt_nginx_loginlog_st \nwhere pt = '2012-03-26' limit 2;\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#14urlparse_url","title":"14\u3001URL\u89e3\u6790\u51fd\u6570\uff1aparse_url","text":"<p>\u8bed\u6cd5: <code>parse_url(string urlString, string partToExtract [, string keyToExtract])</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56deURL\u4e2d\u6307\u5b9a\u7684\u90e8\u5206\u3002partToExtract\u7684\u6709\u6548\u503c\u4e3a\uff1aHOST, PATH, QUERY, REF, PROTOCOL, AUTHORITY, FILE, and USERINFO. <pre><code>hive&gt; select parse_url('https://www.iteblog.com/path1/p.php?k1=v1&amp;k2=v2#Ref1', 'HOST') from iteblog;\nfacebook.com\nhive&gt; select parse_url('https://www.iteblog.com/path1/p.php?k1=v1&amp;k2=v2#Ref1', 'QUERY', 'k1') from iteblog;\nv1\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#15jsonget_json_object","title":"15\u3001json\u89e3\u6790\u51fd\u6570\uff1aget_json_object","text":"<p>\u8bed\u6cd5: <code>get_json_object(string json_string, string path)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u89e3\u6790json\u7684\u5b57\u7b26\u4e32json_string,\u8fd4\u56depath\u6307\u5b9a\u7684\u5185\u5bb9\u3002\u5982\u679c\u8f93\u5165\u7684json\u5b57\u7b26\u4e32\u65e0\u6548\uff0c\u90a3\u4e48\u8fd4\u56deNULL\u3002 <pre><code>hive&gt; select  get_json_object('{\"store\":\n&gt;   {\"fruit\":\\[{\"weight\":8,\"type\":\"apple\"},{\"weight\":9,\"type\":\"pear\"}],\n&gt;    \"bicycle\":{\"price\":19.95,\"color\":\"red\"}\n&gt;   },\n&gt;  \"email\":\"amy@only_for_json_udf_test.net\",\n&gt;  \"owner\":\"amy\"\n&gt; }\n&gt; ','$.owner') from iteblog;\namy\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#16space","title":"16\u3001\u7a7a\u683c\u5b57\u7b26\u4e32\u51fd\u6570\uff1aspace","text":"<p>\u8bed\u6cd5: <code>space(int n)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u957f\u5ea6\u4e3an\u7684\u5b57\u7b26\u4e32 <pre><code>hive&gt; select space(10) from iteblog;\nhive&gt; select length(space(10)) from iteblog;\n10\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#17repeat","title":"17\u3001\u91cd\u590d\u5b57\u7b26\u4e32\u51fd\u6570\uff1arepeat","text":"<p>\u8bed\u6cd5: <code>repeat(string str, int n)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u8fd4\u56de\u91cd\u590dn\u6b21\u540e\u7684str\u5b57\u7b26\u4e32 <pre><code>hive&gt; select repeat('abc',5) from iteblog;\nabcabcabcabcabc\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#18asciiascii","title":"18\u3001\u9996\u5b57\u7b26ascii\u51fd\u6570\uff1aascii","text":"<p>\u8bed\u6cd5: <code>ascii(string str)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32str\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684ascii\u7801 <pre><code>hive&gt; select ascii('abcde') from iteblog;\n97\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#19lpad","title":"19\u3001\u5de6\u8865\u8db3\u51fd\u6570\uff1alpad","text":"<p>\u8bed\u6cd5: <code>lpad(string str, int len, string pad)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u5c06str\u8fdb\u884c\u7528pad\u8fdb\u884c\u5de6\u8865\u8db3\u5230len\u4f4d <pre><code>hive&gt; select lpad('abc',10,'td') from iteblog;\ntdtdtdtabc\n</code></pre> \u6ce8\u610f\uff1a\u4e0eGP\uff0cORACLE\u4e0d\u540c\uff0cpad \u4e0d\u80fd\u9ed8\u8ba4</p>"},{"location":"blog/2024/04/09/hive/#20rpad","title":"20\u3001\u53f3\u8865\u8db3\u51fd\u6570\uff1arpad","text":"<p>\u8bed\u6cd5: <code>rpad(string str, int len, string pad)</code> \u8fd4\u56de\u503c: string \u8bf4\u660e\uff1a\u5c06str\u8fdb\u884c\u7528pad\u8fdb\u884c\u53f3\u8865\u8db3\u5230len\u4f4d <pre><code>hive&gt; select rpad('abc',10,'td') from iteblog;\nabctdtdtdt\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#21-split","title":"21\u3001\u5206\u5272\u5b57\u7b26\u4e32\u51fd\u6570: split","text":"<p>\u8bed\u6cd5: <code>split(string str, string pat)</code> \u8fd4\u56de\u503c: array \u8bf4\u660e: \u6309\u7167pat\u5b57\u7b26\u4e32\u5206\u5272str\uff0c\u4f1a\u8fd4\u56de\u5206\u5272\u540e\u7684\u5b57\u7b26\u4e32\u6570\u7ec4 <pre><code>hive&gt; select split('abtcdtef','t') from iteblog;\n[\"ab\",\"cd\",\"ef\"]\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#22-find_in_set","title":"22\u3001\u96c6\u5408\u67e5\u627e\u51fd\u6570: find_in_set","text":"<p>\u8bed\u6cd5: <code>find_in_set(string str, string strList)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56destr\u5728strlist\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0cstrlist\u662f\u7528\u9017\u53f7\u5206\u5272\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6ca1\u6709\u627e\u8be5str\u5b57\u7b26\uff0c\u5219\u8fd4\u56de0 <pre><code>hive&gt; select find_in_set('ab','ef,ab,de') from iteblog;\n2\nhive&gt; select find_in_set('at','ef,ab,de') from iteblog;\n0\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_11","title":"\u96c6\u5408\u7edf\u8ba1\u51fd\u6570","text":""},{"location":"blog/2024/04/09/hive/#1-count","title":"1\u3001\u4e2a\u6570\u7edf\u8ba1\u51fd\u6570: count","text":"<p>\u8bed\u6cd5: <code>count(*)</code>, <code>count(expr)</code>, <code>count(DISTINCT expr[, expr_.])</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: count(*)\u7edf\u8ba1\u68c0\u7d22\u51fa\u7684\u884c\u7684\u4e2a\u6570\uff0c\u5305\u62ecNULL\u503c\u7684\u884c\uff1bcount(expr)\u8fd4\u56de\u6307\u5b9a\u5b57\u6bb5\u7684\u975e\u7a7a\u503c\u7684\u4e2a\u6570\uff1bcount(DISTINCT expr[, expr_.])\u8fd4\u56de\u6307\u5b9a\u5b57\u6bb5\u7684\u4e0d\u540c\u7684\u975e\u7a7a\u503c\u7684\u4e2a\u6570 <pre><code>hive&gt; select count(*) from iteblog;\n20\nhive&gt; select count(distinct t) from iteblog;\n10\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2-sum","title":"2\u3001\u603b\u548c\u7edf\u8ba1\u51fd\u6570: sum","text":"<p>\u8bed\u6cd5: <code>sum(col)</code>, <code>sum(DISTINCT col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: sum(col)\u7edf\u8ba1\u7ed3\u679c\u96c6\u4e2dcol\u7684\u76f8\u52a0\u7684\u7ed3\u679c\uff1bsum(DISTINCT col)\u7edf\u8ba1\u7ed3\u679c\u4e2dcol\u4e0d\u540c\u503c\u76f8\u52a0\u7684\u7ed3\u679c <pre><code>hive&gt; select sum(t) from iteblog;\n100\nhive&gt; select sum(distinct t) from iteblog;\n70\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3-avg","title":"3\u3001\u5e73\u5747\u503c\u7edf\u8ba1\u51fd\u6570: avg","text":"<p>\u8bed\u6cd5: <code>avg(col)</code>, <code>avg(DISTINCT col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: avg(col)\u7edf\u8ba1\u7ed3\u679c\u96c6\u4e2dcol\u7684\u5e73\u5747\u503c\uff1bavg(DISTINCT col)\u7edf\u8ba1\u7ed3\u679c\u4e2dcol\u4e0d\u540c\u503c\u76f8\u52a0\u7684\u5e73\u5747\u503c <pre><code>hive&gt; select avg(t) from iteblog;\n50\nhive&gt; select avg (distinct t) from iteblog;\n30\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#4-min","title":"4\u3001\u6700\u5c0f\u503c\u7edf\u8ba1\u51fd\u6570: min","text":"<p>\u8bed\u6cd5: <code>min(col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u7edf\u8ba1\u7ed3\u679c\u96c6\u4e2dcol\u5b57\u6bb5\u7684\u6700\u5c0f\u503c <pre><code>hive&gt; select min(t) from iteblog;\n20\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#5-max","title":"5\u3001\u6700\u5927\u503c\u7edf\u8ba1\u51fd\u6570: max","text":"<p>\u8bed\u6cd5: <code>max(col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u7edf\u8ba1\u7ed3\u679c\u96c6\u4e2dcol\u5b57\u6bb5\u7684\u6700\u5927\u503c <pre><code>hive&gt; select max(t) from iteblog;\n120\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#6-var_pop","title":"6\u3001\u975e\u7a7a\u96c6\u5408\u603b\u4f53\u53d8\u91cf\u51fd\u6570: var_pop","text":"<p>\u8bed\u6cd5: <code>var_pop(col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u7edf\u8ba1\u7ed3\u679c\u96c6\u4e2dcol\u975e\u7a7a\u96c6\u5408\u7684\u603b\u4f53\u53d8\u91cf\uff08\u5ffd\u7565null\uff09</p>"},{"location":"blog/2024/04/09/hive/#7-var_samp","title":"7\u3001\u975e\u7a7a\u96c6\u5408\u6837\u672c\u53d8\u91cf\u51fd\u6570: var_samp","text":"<p>\u8bed\u6cd5: <code>var_samp (col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u7edf\u8ba1\u7ed3\u679c\u96c6\u4e2dcol\u975e\u7a7a\u96c6\u5408\u7684\u6837\u672c\u53d8\u91cf\uff08\u5ffd\u7565null\uff09</p>"},{"location":"blog/2024/04/09/hive/#8-stddev_pop","title":"8\u3001\u603b\u4f53\u6807\u51c6\u504f\u79bb\u51fd\u6570: stddev_pop","text":"<p>\u8bed\u6cd5: <code>stddev_pop(col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8be5\u51fd\u6570\u8ba1\u7b97\u603b\u4f53\u6807\u51c6\u504f\u79bb\uff0c\u5e76\u8fd4\u56de\u603b\u4f53\u53d8\u91cf\u7684\u5e73\u65b9\u6839\uff0c\u5176\u8fd4\u56de\u503c\u4e0eVAR_POP\u51fd\u6570\u7684\u5e73\u65b9\u6839\u76f8\u540c</p>"},{"location":"blog/2024/04/09/hive/#9-stddev_samp","title":"9\u3001\u6837\u672c\u6807\u51c6\u504f\u79bb\u51fd\u6570: stddev_samp","text":"<p>\u8bed\u6cd5: <code>stddev_samp (col)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u8be5\u51fd\u6570\u8ba1\u7b97\u6837\u672c\u6807\u51c6\u504f\u79bb</p>"},{"location":"blog/2024/04/09/hive/#10-percentile","title":"10\uff0e\u4e2d\u4f4d\u6570\u51fd\u6570: percentile","text":"<p>\u8bed\u6cd5: <code>percentile(BIGINT col, p)</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u6c42\u51c6\u786e\u7684\u7b2cpth\u4e2a\u767e\u5206\u4f4d\u6570\uff0cp\u5fc5\u987b\u4ecb\u4e8e0\u548c1\u4e4b\u95f4\uff0c\u4f46\u662fcol\u5b57\u6bb5\u76ee\u524d\u53ea\u652f\u6301\u6574\u6570\uff0c\u4e0d\u652f\u6301\u6d6e\u70b9\u6570\u7c7b\u578b</p>"},{"location":"blog/2024/04/09/hive/#11-percentile","title":"11\u3001\u4e2d\u4f4d\u6570\u51fd\u6570: percentile","text":"<p>\u8bed\u6cd5: <code>percentile(BIGINT col, array(p1 [, p2]\u2026))</code> \u8fd4\u56de\u503c: <code>array&lt;double&gt;</code> \u8bf4\u660e: \u529f\u80fd\u548c\u4e0a\u8ff0\u7c7b\u4f3c\uff0c\u4e4b\u540e\u540e\u9762\u53ef\u4ee5\u8f93\u5165\u591a\u4e2a\u767e\u5206\u4f4d\u6570\uff0c\u8fd4\u56de\u7c7b\u578b\u4e5f\u4e3a<code>array&lt;double&gt;</code>\uff0c\u5176\u4e2d\u4e3a\u5bf9\u5e94\u7684\u767e\u5206\u4f4d\u6570\u3002 <pre><code>select percentile(score,array(0.2,0.4)) from iteblog\uff1b\n</code></pre></p> <p>\u53d60.2\uff0c0.4\u4f4d\u7f6e\u7684\u6570\u636e</p>"},{"location":"blog/2024/04/09/hive/#12-percentile_approx","title":"12\u3001\u8fd1\u4f3c\u4e2d\u4f4d\u6570\u51fd\u6570: percentile_approx","text":"<p>\u8bed\u6cd5: <code>percentile_approx(DOUBLE col, p [, B])</code> \u8fd4\u56de\u503c: double \u8bf4\u660e: \u6c42\u8fd1\u4f3c\u7684\u7b2cpth\u4e2a\u767e\u5206\u4f4d\u6570\uff0cp\u5fc5\u987b\u4ecb\u4e8e0\u548c1\u4e4b\u95f4\uff0c\u8fd4\u56de\u7c7b\u578b\u4e3adouble\uff0c\u4f46\u662fcol\u5b57\u6bb5\u652f\u6301\u6d6e\u70b9\u7c7b\u578b\u3002\u53c2\u6570B\u63a7\u5236\u5185\u5b58\u6d88\u8017\u7684\u8fd1\u4f3c\u7cbe\u5ea6\uff0cB\u8d8a\u5927\uff0c\u7ed3\u679c\u7684\u51c6\u786e\u5ea6\u8d8a\u9ad8\u3002\u9ed8\u8ba4\u4e3a10,000\u3002\u5f53col\u5b57\u6bb5\u4e2d\u7684distinct\u503c\u7684\u4e2a\u6570\u5c0f\u4e8eB\u65f6\uff0c\u7ed3\u679c\u4e3a\u51c6\u786e\u7684\u767e\u5206\u4f4d\u6570</p>"},{"location":"blog/2024/04/09/hive/#13-percentile_approx","title":"13\u3001\u8fd1\u4f3c\u4e2d\u4f4d\u6570\u51fd\u6570: percentile_approx","text":"<p>\u8bed\u6cd5: <code>percentile_approx(DOUBLE col, array(p1 [, p2]\u2026) [, B])</code> \u8fd4\u56de\u503c: <code>array&lt;double&gt;</code> \u8bf4\u660e: \u529f\u80fd\u548c\u4e0a\u8ff0\u7c7b\u4f3c\uff0c\u4e4b\u540e\u540e\u9762\u53ef\u4ee5\u8f93\u5165\u591a\u4e2a\u767e\u5206\u4f4d\u6570\uff0c\u8fd4\u56de\u7c7b\u578b\u4e5f\u4e3a<code>array&lt;double&gt;</code>\uff0c\u5176\u4e2d\u4e3a\u5bf9\u5e94\u7684\u767e\u5206\u4f4d\u6570\u3002</p>"},{"location":"blog/2024/04/09/hive/#14-histogram_numeric","title":"14\u3001\u76f4\u65b9\u56fe: histogram_numeric","text":"<p>\u8bed\u6cd5: <code>histogram_numeric(col, b)</code> \u8fd4\u56de\u503c: <code>array&lt;struct {\u2018x\u2019,\u2018y\u2019}&gt;</code> \u8bf4\u660e: \u4ee5b\u4e3a\u57fa\u51c6\u8ba1\u7b97col\u7684\u76f4\u65b9\u56fe\u4fe1\u606f\u3002 <pre><code>hive&gt; select histogram_numeric(100,5) from iteblog;\n[{\"x\":100.0,\"y\":1.0}]\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_12","title":"\u590d\u5408\u7c7b\u578b\u6784\u5efa\u64cd\u4f5c","text":""},{"location":"blog/2024/04/09/hive/#1map-map","title":"1\u3001Map\u7c7b\u578b\u6784\u5efa: map","text":"<p>\u8bed\u6cd5: <code>map (key1, value1, key2, value2, \u2026)</code> \u8bf4\u660e\uff1a\u6839\u636e\u8f93\u5165\u7684key\u548cvalue\u5bf9\u6784\u5efamap\u7c7b\u578b <pre><code>hive&gt; Create table iteblog as select map('100','tom','200','mary') as t from iteblog;\nhive&gt; describe iteblog;\nt       map&lt;string ,string&gt;\nhive&gt; select t from iteblog;\n{\"100\":\"tom\",\"200\":\"mary\"}\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2struct-struct","title":"2\u3001Struct\u7c7b\u578b\u6784\u5efa: struct","text":"<p>\u8bed\u6cd5: <code>struct(val1, val2, val3, \u2026)</code> \u8bf4\u660e\uff1a\u6839\u636e\u8f93\u5165\u7684\u53c2\u6570\u6784\u5efa\u7ed3\u6784\u4f53struct\u7c7b\u578b <pre><code>hive&gt; create table iteblog as select struct('tom','mary','tim') as t from iteblog;\nhive&gt; describe iteblog;\nt       struct&lt;col1:string ,col2:string,col3:string&gt;\nhive&gt; select t from iteblog;\n{\"col1\":\"tom\",\"col2\":\"mary\",\"col3\":\"tim\"}\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3array-array","title":"3\u3001array\u7c7b\u578b\u6784\u5efa: array","text":"<p>\u8bed\u6cd5: <code>array(val1, val2, \u2026)</code> \u8bf4\u660e\uff1a\u6839\u636e\u8f93\u5165\u7684\u53c2\u6570\u6784\u5efa\u6570\u7ec4array\u7c7b\u578b <pre><code>hive&gt; create table iteblog as select array(\"tom\",\"mary\",\"tim\") as t from iteblog;\nhive&gt; describe iteblog;\nt       array&lt;string&gt;\nhive&gt; select t from iteblog;\n[\"tom\",\"mary\",\"tim\"]\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_13","title":"\u590d\u6742\u7c7b\u578b\u8bbf\u95ee\u64cd\u4f5c","text":""},{"location":"blog/2024/04/09/hive/#1array-an","title":"1\u3001array\u7c7b\u578b\u8bbf\u95ee: A[n]","text":"<p>\u8bed\u6cd5: <code>A[n]</code> \u64cd\u4f5c\u7c7b\u578b: A\u4e3aarray\u7c7b\u578b\uff0cn\u4e3aint\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56de\u6570\u7ec4A\u4e2d\u7684\u7b2cn\u4e2a\u53d8\u91cf\u503c\u3002\u6570\u7ec4\u7684\u8d77\u59cb\u4e0b\u6807\u4e3a0\u3002\u6bd4\u5982\uff0cA\u662f\u4e2a\u503c\u4e3a['foo', 'bar']\u7684\u6570\u7ec4\u7c7b\u578b\uff0c\u90a3\u4e48A[0]\u5c06\u8fd4\u56de'foo',\u800cA[1]\u5c06\u8fd4\u56de'bar' <pre><code>hive&gt; create table iteblog as select array(\"tom\",\"mary\",\"tim\") as t from iteblog;\nhive&gt; select t[0],t[1],t[2] from iteblog;\ntom     mary    tim\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#2map-mkey","title":"2\u3001map\u7c7b\u578b\u8bbf\u95ee: M[key]","text":"<p>\u8bed\u6cd5: <code>M[key]</code> \u64cd\u4f5c\u7c7b\u578b: M\u4e3amap\u7c7b\u578b\uff0ckey\u4e3amap\u4e2d\u7684key\u503c \u8bf4\u660e\uff1a\u8fd4\u56demap\u7c7b\u578bM\u4e2d\uff0ckey\u503c\u4e3a\u6307\u5b9a\u503c\u7684value\u503c\u3002\u6bd4\u5982\uff0cM\u662f\u503c\u4e3a{'f' -&gt; 'foo', 'b' -&gt; 'bar', 'all' -&gt; 'foobar'}\u7684map\u7c7b\u578b\uff0c\u90a3\u4e48M['all']\u5c06\u4f1a\u8fd4\u56de'foobar' <pre><code>hive&gt; Create table iteblog as select map('100','tom','200','mary') as t from iteblog;\nhive&gt; select t['200'],t['100'] from iteblog;\nmary    tom\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#3struct-sx","title":"3\u3001struct\u7c7b\u578b\u8bbf\u95ee: S.x","text":"<p>\u8bed\u6cd5: <code>S.x</code> \u64cd\u4f5c\u7c7b\u578b: S\u4e3astruct\u7c7b\u578b \u8bf4\u660e\uff1a\u8fd4\u56de\u7ed3\u6784\u4f53S\u4e2d\u7684x\u5b57\u6bb5\u3002\u6bd4\u5982\uff0c\u5bf9\u4e8e\u7ed3\u6784\u4f53struct foobar {int foo, int bar}\uff0cfoobar.foo\u8fd4\u56de\u7ed3\u6784\u4f53\u4e2d\u7684foo\u5b57\u6bb5 <pre><code>hive&gt; create table iteblog as select struct('tom','mary','tim') as t from iteblog;\nhive&gt; describe iteblog;\nt       struct&lt;col1:string ,col2:string,col3:string&gt;\nhive&gt; select t.col1,t.col3 from iteblog;\ntom     tim\n</code></pre></p>"},{"location":"blog/2024/04/09/hive/#_14","title":"\u590d\u6742\u7c7b\u578b\u957f\u5ea6\u7edf\u8ba1\u51fd\u6570","text":""},{"location":"blog/2024/04/09/hive/#1map-sizemap","title":"1\u3001Map\u7c7b\u578b\u957f\u5ea6\u51fd\u6570: size(Map) <p>\u8bed\u6cd5: <code>size(Map&lt;k .V&gt;)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56demap\u7c7b\u578b\u7684\u957f\u5ea6 <pre><code>hive&gt; select size(map('100','tom','101','mary')) from iteblog;\n2\n</code></pre></p>","text":""},{"location":"blog/2024/04/09/hive/#2array-sizearray","title":"2\u3001array\u7c7b\u578b\u957f\u5ea6\u51fd\u6570: size(Array) <p>\u8bed\u6cd5: <code>size(Array&lt;T&gt;)</code> \u8fd4\u56de\u503c: int \u8bf4\u660e: \u8fd4\u56dearray\u7c7b\u578b\u7684\u957f\u5ea6 <pre><code>hive&gt; select size(array('100','101','102','103')) from iteblog;\n4\n</code></pre></p>","text":""},{"location":"blog/2024/04/09/hive/#3_2","title":"3\u3001\u7c7b\u578b\u8f6c\u6362\u51fd\u6570 <p>\u7c7b\u578b\u8f6c\u6362\u51fd\u6570: <code>cast</code> \u8bed\u6cd5: cast(expr as ) \u8fd4\u56de\u503c: Expected \"=\" to follow \"type\" \u8bf4\u660e: \u8fd4\u56de\u8f6c\u6362\u540e\u7684\u6570\u636e\u7c7b\u578b <pre><code>hive&gt; select cast(1 as bigint) from iteblog;\n1\n</code></pre>","text":""},{"location":"blog/2023/12/25/mkdocs/","title":"MkDocs","text":"<p>\u5b98\u65b9\u6587\u6863</p>"},{"location":"blog/2023/12/25/mkdocs/#_1","title":"\u5b89\u88c5","text":""},{"location":"blog/2023/12/25/mkdocs/#pip","title":"\u901a\u8fc7 <code>pip</code> \u5b89\u88c5","text":"<pre><code>pip install mkdocs-material\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#mkdocsyml","title":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 <code>mkdocs.yml</code>:","text":"<pre><code>theme:\n  name: material\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#_2","title":"\u521b\u5efa\u65b0\u9879\u76ee","text":"<pre><code>mkdocs new [dir-name]\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#_3","title":"\u542f\u52a8\u52a8\u6001\u670d\u52a1\u5668","text":"<pre><code>mkdocs serve\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#_4","title":"\u90e8\u7f72\u9759\u6001\u9875\u9762","text":"<pre><code>mkdocs build\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#_5","title":"\u67e5\u770b\u5e2e\u52a9","text":"<pre><code>mkdocs -h\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#_6","title":"\u9879\u76ee\u63cf\u8ff0","text":"<pre><code>    mkdocs.yml    # \u914d\u7f6e\u6587\u4ef6\n    docs/\n        index.md  # \u4e3b\u9875\n        ...       # \u5176\u4ed6 markdown \u9875\u9762\u3001\u56fe\u7247\u548c\u5176\u4ed6\u6587\u4ef6\n</code></pre>"},{"location":"blog/2023/12/25/mkdocs/#_7","title":"\u8bb8\u53ef","text":"<p>MIT License</p> <p>Copyright (c) 2016-2024 Martin Donath</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"blog/2024/04/26/mysql/","title":"MySQL","text":""},{"location":"blog/2024/04/26/mysql/#_1","title":"\u5e38\u7528\u67e5\u8be2\u8bed\u53e5","text":"<pre><code># \u7edf\u8ba1\u4e8b\u4ef6\u5927\u5206\u7c7b\nSELECT SUBSTR(GKLX,1,4),COUNT(SUBSTR(GKLX,1,4)) AS item_count FROM `xnsdsjj_12345cbs` GROUP BY SUBSTR(GKLX,1,4) ORDER BY item_count DESC;\n\n# \u7edf\u8ba1\u7ea0\u7eb7\u5206\u7c7b\nSELECT GKLX,COUNT(GKLX) AS item_count FROM `xnsdsjj_12345cbs` GROUP BY GKLX HAVING GKLX LIKE '%\u7ea0\u7eb7%' ORDER BY item_count DESC;\n\n# \u7edf\u8ba1\u6307\u5b9a\u65e5\u671f\u5185\u7ea0\u7eb7\u5206\u7c7b\nCREATE TEMPORARY TABLE temp_table AS SELECT BLBM,SLSJ,GKLX,COUNT(DISTINCT GKLX) AS item_count FROM `xnsdsjj_12345cbs` GROUP BY BLBM,SLSJ,GKLX HAVING SLSJ &gt;= '2023-01-01 00:00:00' AND GKLX LIKE '%\u7ea0\u7eb7%';\nSELECT GKLX,COUNT(GKLX) AS GKLX_COUNT FROM temp_table GROUP BY GKLX ORDER BY GKLX_COUNT DESC;\n</code></pre>"},{"location":"blog/2024/04/29/netflow/","title":"Netflow","text":""},{"location":"blog/2024/04/29/netflow/#_1","title":"\u5b89\u88c5\u4f9d\u8d56","text":"<pre><code>apt install libpcap-dev libtool rrdtool librrd-dev flex libsocket6-perl librrdtool-oo-perl nginx php5.6-fpm php5.6-mbstring php5.6-gd php5.6-xml\n</code></pre>"},{"location":"blog/2024/04/29/netflow/#fprobe","title":"\u5b89\u88c5 fprobe","text":"<pre><code>https://sourceforge.net/projects/fprobe/\ntar jxvf fprobe-1.1.tar.bz2\ncd fprobe-1.1\n./configure\nmake\nmake install\nfprobe -i ens33 127.0.0.1:9995\ntcpdump -i lo port 9995 -v\n</code></pre>"},{"location":"blog/2024/04/29/netflow/#nfdump","title":"\u5b89\u88c5 nfdump","text":"<pre><code>git clone https://github.com/phaag/nfdump.git\ncd nfdump\n./autogen.sh\n./configure --enable-nfprofile --enable-nftrack --with-rrdpath=/usr/bin\nmake\nmake install\nldconfig\nnfdump -V\n</code></pre>"},{"location":"blog/2024/04/29/netflow/#nfsen","title":"\u5b89\u88c5 nfsen","text":"<pre><code>git clone https://github.com/phaag/nfsen.git\ncd nfsen\ncp etc/nfsen-dist.conf etc/nfsen.conf\n\nvim etc/nfsen.conf\n\n$BASEDIR = \"/opt/nfsen\";\n$HTMLDIR = \"/opt/nfsen/www/\";\n$USER    = \"www-data\";\n$WWWUSER  = \"www-data\";\n$WWWGROUP = \"www-data\";\n%sources = (\n    'source' =&gt; { 'port' =&gt; '9995', 'col' =&gt; '#0000ff', 'type' =&gt; 'netflow' },\n);\n@plugins = (\n[ 'live', 'PortTracker'], \n);\n\n./install.pl etc/nfsen.conf\n\nvim /etc/nginx/conf.d/nfsen.conf\n\nserver {\n    listen 80;\n    server_name localhost;\n    access_log /var/log/nginx/nfsen.log;\n    root /opt/nfsen/www;\n    index nfsen.php;\n    location ~ \\.php$ {\n      include fastcgi_params;\n      fastcgi_intercept_errors on;\n      fastcgi_pass unix:/run/php/php5.6-fpm.sock;\n      fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name;\n    }\n}\n\n/opt/nfsen/bin/nfsen start\n\nvim /usr/lib/systemd/system/nfsen.service\n\n[Unit]\nDescription=NfSen Service\nAfter=network.target\n\n[Service]\nType=forking\nPIDFile=/opt/nfsen/var/run/nfsend.pid\nExecStart=/opt/nfsen/bin/nfsen start\nExecStop=/opt/nfsen/bin/nfsen stop\nRestart=on-abort\n\n[Install]\nWantedBy=multi-user.target\n\nsystemctl enable --now nfsen\nsystemctl enable --now nginx\n\ncp contrib/PortTracker/PortTracker.pm  /opt/nfsen/plugins/\ncp contrib/PortTracker/PortTracker.php  /opt/nfsen/www/plugins/\n\nvim /opt/nfsen/plugins/PortTracker.pm\nmy $PORTSDBDIR = \"/opt/nfsen/data/ports-db\"\n\nmkdir -p /opt/nfsen/data/ports-db\nchown www-data:www-data /opt/nfsen/data/ports-db\nnftrack -I -d /opt/nfsen/data/ports-db\n/opt/nfsen/bin/nfsen reload\nchown -R www-data:www-data /opt/nfsen/data/ports-db\n</code></pre>"},{"location":"blog/2024/04/29/netflow/#hoststats","title":"\u5b89\u88c5 hoststats","text":"<pre><code>https://sourceforge.net/projects/hoststats/\ntar zxvf hoststats-1.1.5\ncd hoststats-1.1.5\n./install-libnfdump.sh\n./configure\nmake\n./install.sh\nchown www-data.www-data -R /opt/nfsen/data/hoststats\n\nvim /etc/ld.so.conf\n/usr/lib64\n\nldconfig\n/opt/nfsen/data/hoststats/hoststats start\n\nvim /usr/lib/systemd/system/hoststats.service\n\n[Unit]\nDescription=Hoststats Service\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/opt/nfsen/data/hoststats/hoststats start\nExecStop=/opt/nfsen/data/hoststats/hoststats stop\nRestart=on-abort\n\n[Install]\nWantedBy=multi-user.target\n\nsystemctl enable --now hoststats\n</code></pre>"},{"location":"blog/2023/12/24/singbox/","title":"SingBox","text":"<p>SingBox \u914d\u7f6e\u6587\u4ef6 config.json</p>"},{"location":"blog/2023/12/24/singbox/#_1","title":"\u65b0\u7248\u914d\u7f6e","text":"<pre><code>{\n  \"log\": {\n    \"disabled\": true,\n    \"level\": \"debug\",\n    \"timestamp\": true\n  },\n  \"experimental\": {\n    \"clash_api\": {\n      \"external_controller\": \"127.0.0.1:9090\",\n      \"external_ui\": \"ui\",\n      \"secret\": \"\",\n      \"default_mode\": \"rule\"\n    },\n    \"cache_file\": {\n      \"enabled\": true,\n      \"store_fakeip\": false\n    }\n  },\n  \"dns\": {\n    \"servers\": [\n      {\n        \"tag\": \"proxyDns\",\n        \"address\": \"tls://8.8.8.8\",\n        \"detour\": \"proxy\"\n      },\n      {\n        \"tag\": \"localDns\",\n        \"address\": \"https://223.5.5.5/dns-query\",\n        \"detour\": \"direct\"\n      },\n      {\n        \"tag\": \"block\",\n        \"address\": \"rcode://success\"\n      }\n    ],\n    \"rules\": [\n      {\n        \"domain\": [\n          \"ghproxy.com\",\n          \"cdn.jsdelivr.net\",\n          \"testingcf.jsdelivr.net\"\n        ],\n        \"server\": \"localDns\"\n      },\n      {\n        \"rule_set\": \"geosite-category-ads-all\",\n        \"server\": \"block\"\n      },\n      {\n        \"outbound\": \"any\",\n        \"server\": \"localDns\",\n        \"disable_cache\": true\n      },\n      {\n        \"rule_set\": \"geosite-cn\",\n        \"server\": \"localDns\"\n      },\n      {\n        \"clash_mode\": \"direct\",\n        \"server\": \"localDns\"\n      },\n      {\n        \"clash_mode\": \"global\",\n        \"server\": \"proxyDns\"\n      },\n      {\n        \"rule_set\": \"geosite-geolocation-!cn\",\n        \"server\": \"proxyDns\"\n      }\n    ]\n  },\n  \"inbounds\": [\n    {\n      \"type\": \"tun\",\n      \"inet4_address\": \"172.19.0.1/30\",\n      \"inet6_address\": \"fdfe:dcba:9876::1/126\",\n      \"mtu\": 9000,\n      \"auto_route\": true,\n      \"strict_route\": true,\n      \"sniff\": true,\n      \"endpoint_independent_nat\": false,\n      \"stack\": \"system\",\n      \"platform\": {\n        \"http_proxy\": {\n          \"enabled\": true,\n          \"server\": \"127.0.0.1\",\n          \"server_port\": 2080\n        }\n      }\n    },\n    {\n      \"type\": \"mixed\",\n      \"listen\": \"127.0.0.1\",\n      \"listen_port\": 2080,\n      \"sniff\": true,\n      \"users\": []\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"tag\": \"proxy\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"auto\",\n        \"direct\",\n        \"\ud83c\uddfa\ud83c\uddf8 US1\",\n        \"\ud83c\uddfa\ud83c\uddf8 US2\",\n        \"\ud83c\uddfa\ud83c\uddf8 US3\",\n        \"\ud83c\uddfa\ud83c\uddf8 US4\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83e\udd16 OpenAI\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ],\n      \"default\": \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\"\n    },\n    {\n      \"tag\": \"\ud83c\udf0c Google\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udcdf Telegram\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udc26 Twitter\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udc64 Facebook\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udecd\ufe0f Amazon\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udf4e Apple\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83e\udde9 Microsoft\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udfae Game\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udcfa Bilibili\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udfac MediaVideo\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udf0f !cn\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\",\n        \"direct\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\uddfa\ud83c\uddf8 US1\",\n        \"\ud83c\uddfa\ud83c\uddf8 US2\",\n        \"\ud83c\uddfa\ud83c\uddf8 US3\",\n        \"\ud83c\uddfa\ud83c\uddf8 US4\",\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udf0f cn\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\uded1 AdBlock\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"block\",\n        \"direct\"\n      ]\n    },\n    {\n      \"tag\": \"auto\",\n      \"type\": \"urltest\",\n      \"outbounds\": [\n        \"\ud83c\uddfa\ud83c\uddf8 US1\",\n        \"\ud83c\uddfa\ud83c\uddf8 US2\",\n        \"\ud83c\uddfa\ud83c\uddf8 US3\",\n        \"\ud83c\uddfa\ud83c\uddf8 US4\"\n      ],\n      \"url\": \"http://www.gstatic.com/generate_204\",\n      \"interval\": \"5m\",\n      \"tolerance\": 50\n    },\n    {\n      \"type\": \"direct\",\n      \"tag\": \"direct\"\n    },\n    {\n      \"type\": \"dns\",\n      \"tag\": \"dns-out\"\n    },\n    {\n      \"type\": \"block\",\n      \"tag\": \"block\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US1\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"ipv4\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US2\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"[ipv6]\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US3\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"[ipv6]\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US4\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"[ipv6]\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    }\n  ],\n  \"route\": {\n    \"auto_detect_interface\": true,\n    \"final\": \"proxy\",\n    \"rules\": [\n      {\n        \"protocol\": \"dns\",\n        \"outbound\": \"dns-out\"\n      },\n      {\n        \"network\": \"udp\",\n        \"port\": 443,\n        \"outbound\": \"block\"\n      },\n      {\n        \"rule_set\": \"geosite-category-ads-all\",\n        \"outbound\": \"\ud83d\uded1 AdBlock\"\n      },\n      {\n        \"clash_mode\": \"direct\",\n        \"outbound\": \"direct\"\n      },\n      {\n        \"clash_mode\": \"global\",\n        \"outbound\": \"proxy\"\n      },\n      {\n        \"domain\": [\n          \"clash.razord.top\",\n          \"yacd.metacubex.one\",\n          \"yacd.haishan.me\",\n          \"d.metacubex.one\"\n        ],\n        \"outbound\": \"direct\"\n      },\n      {\n        \"rule_set\": \"geosite-openai\",\n        \"outbound\": \"\ud83e\udd16 OpenAI\"\n      },\n      {\n        \"rule_set\": \"geosite-youtube\",\n        \"outbound\": \"\ud83c\udf0c Google\"\n      },\n      {\n        \"rule_set\": \"geoip-google\",\n        \"outbound\": \"\ud83c\udf0c Google\"\n      },\n      {\n        \"rule_set\": [\n          \"geosite-google\",\n          \"geosite-github\"\n        ],\n        \"outbound\": \"\ud83c\udf0c Google\"\n      },\n      {\n        \"rule_set\": \"geoip-telegram\",\n        \"outbound\": \"\ud83d\udcdf Telegram\"\n      },\n      {\n        \"rule_set\": \"geosite-telegram\",\n        \"outbound\": \"\ud83d\udcdf Telegram\"\n      },\n      {\n        \"rule_set\": \"geoip-twitter\",\n        \"outbound\": \"\ud83d\udc26 Twitter\"\n      },\n      {\n        \"rule_set\": \"geosite-twitter\",\n        \"outbound\": \"\ud83d\udc26 Twitter\"\n      },\n      {\n        \"rule_set\": \"geoip-facebook\",\n        \"outbound\": \"\ud83d\udc64 Facebook\"\n      },\n      {\n        \"rule_set\": [\n          \"geosite-facebook\",\n          \"geosite-instagram\"\n        ],\n        \"outbound\": \"\ud83d\udc64 Facebook\"\n      },\n      {\n        \"rule_set\": \"geosite-amazon\",\n        \"outbound\": \"\ud83d\udecd\ufe0f Amazon\"\n      },\n      {\n        \"rule_set\": \"geosite-apple\",\n        \"outbound\": \"\ud83c\udf4e Apple\"\n      },\n      {\n        \"rule_set\": \"geosite-microsoft\",\n        \"outbound\": \"\ud83e\udde9 Microsoft\"\n      },\n      {\n        \"rule_set\": \"geosite-category-games\",\n        \"outbound\": \"\ud83c\udfae Game\"\n      },\n      {\n        \"rule_set\": \"geosite-bilibili\",\n        \"outbound\": \"\ud83d\udcfa Bilibili\"\n      },\n      {\n        \"rule_set\": \"geoip-netflix\",\n        \"outbound\": \"\ud83c\udfac MediaVideo\"\n      },\n      {\n        \"rule_set\": [\n          \"geosite-tiktok\",\n          \"geosite-netflix\",\n          \"geosite-hbo\",\n          \"geosite-disney\",\n          \"geosite-primevideo\"\n        ],\n        \"outbound\": \"\ud83c\udfac MediaVideo\"\n      },\n      {\n        \"rule_set\": \"geosite-geolocation-!cn\",\n        \"outbound\": \"\ud83c\udf0f !cn\"\n      },\n      {\n        \"ip_is_private\": true,\n        \"outbound\": \"\ud83c\udf0f cn\"\n      },\n      {\n        \"rule_set\": \"geoip-cn\",\n        \"outbound\": \"\ud83c\udf0f cn\"\n      },\n      {\n        \"rule_set\": \"geosite-cn\",\n        \"outbound\": \"\ud83c\udf0f cn\"\n      }\n    ],\n    \"rule_set\": [\n      {\n        \"tag\": \"geoip-google\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/google.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geoip-telegram\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/telegram.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geoip-twitter\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/twitter.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geoip-facebook\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/facebook.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geoip-netflix\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/netflix.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geoip-cn\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/cn.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-openai\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/openai.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-youtube\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/youtube.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-google\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/google.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-github\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/github.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-telegram\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/telegram.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-twitter\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/twitter.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-facebook\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/facebook.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-instagram\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/instagram.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-amazon\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/amazon.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-apple\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/apple.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-microsoft\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/microsoft.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-category-games\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/category-games.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-bilibili\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/bilibili.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-tiktok\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/tiktok.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-netflix\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/netflix.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-hbo\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/hbo.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-disney\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/disney.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-primevideo\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/primevideo.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-cn\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/cn.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-geolocation-!cn\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/geolocation-!cn.srs\",\n        \"download_detour\": \"direct\"\n      },\n      {\n        \"tag\": \"geosite-category-ads-all\",\n        \"type\": \"remote\",\n        \"format\": \"binary\",\n        \"url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/category-ads-all.srs\",\n        \"download_detour\": \"direct\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"blog/2023/12/24/singbox/#_2","title":"\u65e7\u7248\u914d\u7f6e","text":"<pre><code>{\n  \"log\": {\n    \"disabled\": true,\n    \"level\": \"debug\",\n    \"timestamp\": true\n  },\n  \"dns\": {\n    \"servers\": [\n      {\n        \"tag\": \"proxyDns\",\n        \"address\": \"tls://8.8.8.8\",\n        \"detour\": \"proxy\"\n      },\n      {\n        \"tag\": \"localDns\",\n        \"address\": \"https://223.5.5.5/dns-query\",\n        \"detour\": \"direct\"\n      },\n      {\n        \"tag\": \"block\",\n        \"address\": \"rcode://success\"\n      }\n    ],\n    \"rules\": [\n      {\n        \"domain\": [\n          \"ghproxy.com\",\n          \"cdn.jsdelivr.net\",\n          \"testingcf.jsdelivr.net\"\n        ],\n        \"server\": \"localDns\"\n      },\n      {\n        \"geosite\": \"category-ads-all\",\n        \"server\": \"block\"\n      },\n      {\n        \"outbound\": \"any\",\n        \"server\": \"localDns\",\n        \"disable_cache\": true\n      },\n      {\n        \"geosite\": \"cn\",\n        \"server\": \"localDns\"\n      },\n      {\n        \"clash_mode\": \"direct\",\n        \"server\": \"localDns\"\n      },\n      {\n        \"clash_mode\": \"global\",\n        \"server\": \"proxyDns\"\n      },\n      {\n        \"geosite\": \"geolocation-!cn\",\n        \"server\": \"proxyDns\"\n      }\n    ]\n  },\n  \"inbounds\": [\n    {\n      \"type\": \"tun\",\n      \"inet4_address\": \"172.19.0.1/30\",\n      \"inet6_address\": \"fdfe:dcba:9876::1/126\",\n      \"mtu\": 9000,\n      \"auto_route\": true,\n      \"strict_route\": true,\n      \"sniff\": true,\n      \"endpoint_independent_nat\": false,\n      \"stack\": \"system\",\n      \"platform\": {\n        \"http_proxy\": {\n          \"enabled\": true,\n          \"server\": \"127.0.0.1\",\n          \"server_port\": 2080\n        }\n      }\n    },\n    {\n      \"type\": \"mixed\",\n      \"listen\": \"127.0.0.1\",\n      \"listen_port\": 2080,\n      \"sniff\": true,\n      \"users\": []\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"tag\": \"proxy\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"auto\",\n        \"direct\",\n        \"\ud83c\uddfa\ud83c\uddf8 US1\",\n        \"\ud83c\uddfa\ud83c\uddf8 US2\",\n        \"\ud83c\uddfa\ud83c\uddf8 US3\",\n        \"\ud83c\uddfa\ud83c\uddf8 US4\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83e\udd16 OpenAI\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ],\n      \"default\": \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\"\n    },\n    {\n      \"tag\": \"\ud83c\udf0c Google\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udcdf Telegram\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udc26 Twitter\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udc64 Facebook\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udecd\ufe0f Amazon\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udf4e Apple\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83e\udde9 Microsoft\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udfae Game\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\udcfa Bilibili\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udfac MediaVideo\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udf0f !cn\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n        \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n        \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n        \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n        \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n        \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\",\n        \"direct\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddf9\ud83c\uddfc \u53f0\u6e7e\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddf8\ud83c\uddec \u72ee\u57ce\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"\ud83c\uddfa\ud83c\uddf8 US1\",\n        \"\ud83c\uddfa\ud83c\uddf8 US2\",\n        \"\ud83c\uddfa\ud83c\uddf8 US3\",\n        \"\ud83c\uddfa\ud83c\uddf8 US4\",\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\u2708\ufe0f \u5176\u4ed6\u8282\u70b9\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83c\udf0f cn\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"direct\",\n        \"proxy\"\n      ]\n    },\n    {\n      \"tag\": \"\ud83d\uded1 AdBlock\",\n      \"type\": \"selector\",\n      \"outbounds\": [\n        \"block\",\n        \"direct\"\n      ]\n    },\n    {\n      \"tag\": \"auto\",\n      \"type\": \"urltest\",\n      \"outbounds\": [\n        \"\ud83c\uddfa\ud83c\uddf8 US1\",\n        \"\ud83c\uddfa\ud83c\uddf8 US2\",\n        \"\ud83c\uddfa\ud83c\uddf8 US3\",\n        \"\ud83c\uddfa\ud83c\uddf8 US4\"\n      ],\n      \"url\": \"http://www.gstatic.com/generate_204\",\n      \"interval\": \"5m\",\n      \"tolerance\": 50\n    },\n    {\n      \"type\": \"direct\",\n      \"tag\": \"direct\"\n    },\n    {\n      \"type\": \"dns\",\n      \"tag\": \"dns-out\"\n    },\n    {\n      \"type\": \"block\",\n      \"tag\": \"block\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US1\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"ipv4\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US2\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"[ipv6]\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US3\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"[ipv6]\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    },\n    {\n      \"tag\": \"\ud83c\uddfa\ud83c\uddf8 US4\",\n      \"type\": \"shadowsocks\",\n      \"server\": \"[ipv6]\",\n      \"server_port\": 10000,\n      \"method\": \"2022-blake3-chacha20-poly1305\",\n      \"password\": \"xxxxxxxx\"\n    }\n  ],\n  \"route\": {\n    \"auto_detect_interface\": true,\n    \"final\": \"proxy\",\n    \"geoip\": {\n      \"download_url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.db\",\n      \"download_detour\": \"direct\"\n    },\n    \"geosite\": {\n      \"download_url\": \"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.db\",\n      \"download_detour\": \"direct\"\n    },\n    \"rules\": [\n      {\n        \"protocol\": \"dns\",\n        \"outbound\": \"dns-out\"\n      },\n      {\n        \"network\": \"udp\",\n        \"port\": 443,\n        \"outbound\": \"block\"\n      },\n      {\n        \"geosite\": \"category-ads-all\",\n        \"outbound\": \"\ud83d\uded1 AdBlock\"\n      },\n      {\n        \"clash_mode\": \"direct\",\n        \"outbound\": \"direct\"\n      },\n      {\n        \"clash_mode\": \"global\",\n        \"outbound\": \"proxy\"\n      },\n      {\n        \"domain\": [\n          \"clash.razord.top\",\n          \"yacd.metacubex.one\",\n          \"yacd.haishan.me\",\n          \"d.metacubex.one\"\n        ],\n        \"outbound\": \"direct\"\n      },\n      {\n        \"geosite\": \"openai\",\n        \"outbound\": \"\ud83e\udd16 OpenAI\"\n      },\n      {\n        \"geosite\": \"youtube\",\n        \"outbound\": \"\ud83c\udf0c Google\"\n      },\n      {\n        \"geoip\": \"google\",\n        \"outbound\": \"\ud83c\udf0c Google\"\n      },\n      {\n        \"geosite\": [\n          \"google\",\n          \"github\"\n        ],\n        \"outbound\": \"\ud83c\udf0c Google\"\n      },\n      {\n        \"geoip\": \"telegram\",\n        \"outbound\": \"\ud83d\udcdf Telegram\"\n      },\n      {\n        \"geosite\": \"telegram\",\n        \"outbound\": \"\ud83d\udcdf Telegram\"\n      },\n      {\n        \"geoip\": \"twitter\",\n        \"outbound\": \"\ud83d\udc26 Twitter\"\n      },\n      {\n        \"geosite\": \"twitter\",\n        \"outbound\": \"\ud83d\udc26 Twitter\"\n      },\n      {\n        \"geoip\": \"facebook\",\n        \"outbound\": \"\ud83d\udc64 Facebook\"\n      },\n      {\n        \"geosite\": [\n          \"facebook\",\n          \"instagram\"\n        ],\n        \"outbound\": \"\ud83d\udc64 Facebook\"\n      },\n      {\n        \"geosite\": \"amazon\",\n        \"outbound\": \"\ud83d\udecd\ufe0f Amazon\"\n      },\n      {\n        \"geosite\": \"apple\",\n        \"outbound\": \"\ud83c\udf4e Apple\"\n      },\n      {\n        \"geosite\": \"apple-cn\",\n        \"outbound\": \"\ud83c\udf4e Apple\"\n      },\n      {\n        \"geosite\": \"microsoft\",\n        \"outbound\": \"\ud83e\udde9 Microsoft\"\n      },\n      {\n        \"geosite\": \"category-games\",\n        \"outbound\": \"\ud83c\udfae Game\"\n      },\n      {\n        \"geosite\": \"bilibili\",\n        \"outbound\": \"\ud83d\udcfa Bilibili\"\n      },\n      {\n        \"geoip\": \"netflix\",\n        \"outbound\": \"\ud83c\udfac MediaVideo\"\n      },\n      {\n        \"geosite\": [\n          \"tiktok\",\n          \"netflix\",\n          \"hbo\",\n          \"disney\",\n          \"primevideo\"\n        ],\n        \"outbound\": \"\ud83c\udfac MediaVideo\"\n      },\n      {\n        \"geosite\": \"geolocation-!cn\",\n        \"outbound\": \"\ud83c\udf0f !cn\"\n      },\n      {\n        \"geoip\": [\n          \"private\",\n          \"cn\"\n        ],\n        \"outbound\": \"\ud83c\udf0f cn\"\n      },\n      {\n        \"geosite\": \"cn\",\n        \"outbound\": \"\ud83c\udf0f cn\"\n      }\n    ]\n  },\n  \"experimental\": {\n    \"clash_api\": {\n      \"external_controller\": \"127.0.0.1:9090\",\n      \"external_ui\": \"ui\",\n      \"secret\": \"\",\n      \"default_mode\": \"rule\",\n      \"store_selected\": true\n    }\n  }\n}\n</code></pre>"},{"location":"blog/2024/04/08/sublime/","title":"Sublime","text":""},{"location":"blog/2024/04/08/sublime/#markdown","title":"\u5b89\u88c5 Markdown \u63d2\u4ef6","text":"<p>Preferences -&gt; Package Control -&gt; Package Control:Install Package</p> <p>\u5b89\u88c5 MarkdownEditing \u548c MarkdownPreview \u63d2\u4ef6</p>"},{"location":"blog/2024/04/08/sublime/#markdown_1","title":"\u914d\u7f6e Markdown \u63d2\u4ef6","text":"<p>Preferences -&gt; Key Bindings</p> <pre><code>{ \"keys\": [\"f1\"], \"command\": \"markdown_preview\", \"args\": {\"target\": \"browser\", \"parser\":\"markdown\"} }\n</code></pre> <p>Preferences -&gt; Package Settings -&gt; Markdown Preview -&gt; Settings</p> <pre><code>{ \"enable_autoreload\": true }\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/","title":"Ubuntu","text":""},{"location":"blog/2024/03/21/ubuntu/#apt","title":"\u914d\u7f6eAPT\u6e90","text":"<pre><code>cat &lt;&lt;EOF &gt;/etc/apt/sources.list\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy universe\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates universe\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu/ jammy-security main restricted\ndeb http://security.ubuntu.com/ubuntu/ jammy-security universe\ndeb http://security.ubuntu.com/ubuntu/ jammy-security multiverse\nEOF\n\napt update &amp;&amp; apt install -y wget\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#ssh","title":"\u5b89\u88c5SSH","text":"<pre><code>apt install -y openssh-server\nsed -i \"s/#Port 22/Port 30022/g\" /etc/ssh/sshd_config\nsed -i \"s/#PermitRootLogin prohibit-password/PermitRootLogin yes/g\" /etc/ssh/sshd_config\nsed -i \"s/#PasswordAuthentication yes/PasswordAuthentication yes/g\" /etc/ssh/sshd_config\nsystemctl enable --now ssh\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#mysql57","title":"\u5b89\u88c5MySQL5.7","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>apt install -y libaio1 libncurses5\nwget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.44-linux-glibc2.12-x86_64.tar.gz\ntar zxvf mysql-5.7.44-linux-glibc2.12-x86_64.tar.gz\nmv mysql-5.7.44-linux-glibc2.12-x86_64 /opt/mysql\nmkdir /opt/mysql/{data,mysql-files,etc,log}\n\ncat &lt;&lt;EOF &gt;/opt/mysql/etc/my.cnf\n[mysqld]\ndatadir=/opt/mysql/data\nsocket=/tmp/mysql.sock\nport=33306\nlog-error=/opt/mysql/log/localhost.localdomain.err\nuser=root\nsecure_file_priv=/opt/mysql/mysql-files\nbind-address=0.0.0.0\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/mysqld.service\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(7)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=root\nGroup=root\nType=forking\nPIDFile=/opt/mysql/mysqld.pid\n\n# Disable service start and stop timeout logic of systemd for mysqld service.\nTimeoutSec=0\n\n# Start main service\nExecStart=/opt/mysql/bin/mysqld --defaults-file=/opt/mysql/etc/my.cnf --daemonize --pid-file=/opt/mysql/mysqld.pid $MYSQLD_OPTS\n\n# Use this to switch malloc implementation\nEnvironmentFile=-/etc/sysconfig/mysql\n\n# Sets open_files_limit\nLimitNOFILE = 5000\nRestart=on-failure\nRestartPreventExitStatus=1\nPrivateTmp=false\nEOF\n\n/opt/mysql/bin/mysqld --defaults-file=/opt/mysql/etc/my.cnf --initialize\nsystemctl enable --now mysqld\ncat /opt/mysql/log/localhost.localdomain.err |grep password\nmysql -uroot -p\n## \u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801\nmysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'yourpassword';\nmysql&gt; use mysql;\n## \u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\nmysql&gt; update user set host = '%' where user = 'root';\nmysql&gt; FLUSH PRIVILEGES;\n\n## \u914d\u7f6eMySQL\u73af\u5883\u53d8\u91cf\ncat &lt;&lt;EOF &gt;/etc/profile.d/mysql.sh\nexport MYSQL_HOME=/opt/mysql\nexport CLASSPATH=.:$MYSQL_HOME/lib\nexport PATH=$PATH:$MYSQL_HOME/bin\nEOF\n\nsource /etc/profile.d/mysql.sh\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#mysql82","title":"\u5b89\u88c5MySQL8.2","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>apt install -y libaio1 libncurses5\nwget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.2.0-linux-glibc2.28-x86_64.tar.xz\ntar zxvf mysql-8.2.0-linux-glibc2.28-x86_64.tar.gz\nmv mysql-8.2.0-linux-glibc2.28-x86_64 /opt/mysql\nmkdir /opt/mysql/{data,mysql-files,etc,log}\n\ncat &lt;&lt;EOF &gt;/opt/mysql/etc/my.cnf\n[mysqld]\ndatadir=/opt/mysql/data\nsocket=/tmp/mysql.sock\nport=33306\nlog-error=/opt/mysql/log/localhost.localdomain.err\nuser=root\nsecure_file_priv=/opt/mysql/mysql-files\nbind-address=0.0.0.0\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/mysqld.service\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=root\nGroup=root\n\n# Have mysqld write its state to the systemd notify socket\nType=notify\n\n# Disable service start and stop timeout logic of systemd for mysqld service.\nTimeoutSec=0\n\n# Start main service\nExecStart=/opt/mysql/bin/mysqld --defaults-file=/opt/mysql/etc/my.cnf $MYSQLD_OPTS \n\n# Use this to switch malloc implementation\nEnvironmentFile=-/etc/sysconfig/mysql\n\n# Sets open_files_limit\nLimitNOFILE = 10000\nRestart=on-failure\nRestartPreventExitStatus=1\n\n# Set environment variable MYSQLD_PARENT_PID. This is required for restart.\nEnvironment=MYSQLD_PARENT_PID=1\nPrivateTmp=false\nEOF\n\n/opt/mysql/bin/mysqld --defaults-file=/opt/mysql/etc/my.cnf --initialize\nsystemctl enable --now mysqld\ncat /opt/mysql/log/localhost.localdomain.err |grep password\nmysql -uroot -p\n## \u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801\nmysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'yourpassword';\nmysql&gt; use mysql;\n## \u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\nmysql&gt; update user set host = '%' where user = 'root';\nmysql&gt; FLUSH PRIVILEGES;\n\n## \u914d\u7f6eMySQL\u73af\u5883\u53d8\u91cf\ncat &lt;&lt;EOF &gt;/etc/profile.d/mysql.sh\nexport MYSQL_HOME=/opt/mysql\nexport CLASSPATH=.:$MYSQL_HOME/lib\nexport PATH=$PATH:$MYSQL_HOME/bin\nEOF\n\nsource /etc/profile.d/mysql.sh\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#rabbitmq","title":"\u5b89\u88c5RabbitMQ","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>apt install -y curl gnupg apt-transport-https\ncurl -1sLf \"https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA\" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/com.rabbitmq.team.gpg &gt; /dev/null\ncurl -1sLf https://github.com/rabbitmq/signing-keys/releases/download/3.0/cloudsmith.rabbitmq-erlang.E495BB49CC4BBE5B.key | sudo gpg --dearmor | sudo tee /usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg &gt; /dev/null\ncurl -1sLf https://github.com/rabbitmq/signing-keys/releases/download/3.0/cloudsmith.rabbitmq-server.9F4587F226208342.key | sudo gpg --dearmor | sudo tee /usr/share/keyrings/rabbitmq.9F4587F226208342.gpg &gt; /dev/null\n\nsudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF\n## Provides modern Erlang/OTP releases\n##\ndeb [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu jammy main\ndeb-src [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu jammy main\n\n# another mirror for redundancy\ndeb [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa2.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu jammy main\ndeb-src [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa2.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu jammy main\n\n## Provides RabbitMQ\n##\ndeb [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu jammy main\ndeb-src [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu jammy main\n\n# another mirror for redundancy\ndeb [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa2.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu jammy main\ndeb-src [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa2.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu jammy main\nEOF\n\napt update\napt install -y erlang-base \\\nerlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \\\nerlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \\\nerlang-runtime-tools erlang-snmp erlang-ssl \\\nerlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl\n\napt install -y rabbitmq-server --fix-missing\n\ncat &lt;&lt;EOF &gt;/etc/rabbitmq/rabbitmq.conf\nloopback_users = none\nEOF\n\nrabbitmqctl enable_feature_flag all\nrabbitmq-plugins enable rabbitmq_management\nsystemctl enable --now rabbitmq-server\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#nginx","title":"\u5b89\u88c5Nginx","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>apt install curl gnupg2 ca-certificates lsb-release ubuntu-keyring\ncurl https://nginx.org/keys/nginx_signing.key | gpg --dearmor | tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null\necho \"deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] http://nginx.org/packages/ubuntu `lsb_release -cs` nginx\" | tee /etc/apt/sources.list.d/nginx.list\napt update\napt install -y nginx\n\ncat &lt;&lt;EOF &gt;/etc/nginx/conf.d/defaults.conf\nupstream your_front {\n  server 127.0.0.1:38080;\n}\n\nupstream your_back {\n  server 127.0.0.1:8080;\n}\n\nserver {\n  listen 80;\n  server_name frontdomain.com;\n\n  location /yourstatic {\n    root /opt/static/;\n  }\n\n  location ~* \\.(txt)$ {\n    root /opt/static/weixin;\n  }\n\n  location / {\n    proxy_http_version 1.1;\n    proxy_redirect off;\n    proxy_pass http://your_front;\n  }\n  access_log /var/log/nginx/your_front.log;\n}\n\nserver {\n  listen 80;\n  server_name backdomain.com;\n\n  location ~^/favicon.ico$ {\n    root /opt/tomcat/apps/your_back;\n  }\n\n  location / {\n    proxy_http_version 1.1;\n    proxy_redirect     off;\n    proxy_pass http://your_back;\n  }\n  access_log /var/log/nginx/your_back.log;\n}\nEOF\n\nsystemctl enable --now nginx\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#php83","title":"\u5b89\u88c5PHP8.3","text":"<p>PHP\u6587\u6863 phpMyAdmin\u6587\u6863 <pre><code>add-apt-repository ppa:ondrej/php\napt install -y php8.3-fpm\nsystemctl enable --now php8.3-fpm\nmkdir /opt/www\n\ncat &lt;&lt;EOF &gt;/opt/www/phpinfo.php\n&lt;?php\nphpinfo();\n?&gt;\nEOF\n\n## nginx \u914d\u7f6e\nserver {\n  listen 80;\n  server_name localhost;\n  root /opt/www;\n  access_log /var/log/nginx/defaults.log;\n  location / {\n    autoindex on;\n    autoindex_exact_size on;\n    autoindex_localtime on;\n  }\n  location ~ \\.php$ {\n    include fastcgi_params;\n    fastcgi_intercept_errors on;\n    fastcgi_pass unix:/run/php/php8.3-fpm.sock;\n    fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name;\n  }\n}\n\n## \u914d\u7f6ephpMyAdmin\nwget https://files.phpmyadmin.net/phpMyAdmin/5.2.1/phpMyAdmin-5.2.1-all-languages.zip\nunzip phpMyAdmin-5.2.1-all-languages.zip\nmv phpMyAdmin-5.2.1-all-languages /opt/www/phpMyAdmin\napt install -y php8.3-mysql php8.3-bz2 php8.3-zip php8.3-mbstring\n## \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528localhost\uff0c\u8981\u4f7f\u7528127.0.0.1\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#tomcat","title":"\u5b89\u88c5Tomcat","text":"<p>JDK\u4e0b\u8f7d Tomcat\u4e0b\u8f7d <pre><code>wget https://dlcdn.apache.org/tomcat/tomcat-8/v8.5.99/bin/apache-tomcat-8.5.99.tar.gz\ntar zxvf apache-tomcat-8.5.99.tar.gz\nmv apache-tomcat-8.5.99 /opt/tomcat\nrm -rf /opt/tomcat/webapps/*\nmkdir /opt/tomcat/apps\n## \u5b98\u7f51\u4e0b\u8f7dJRE1.8\nhttps://www.java.com/en/download/manual.jsp jre-8u401-linux-x64.tar.gz\ntar zxvf jre-8u401-linux-x64.tar.gz\nmv jre1.8.0_401 /opt/jre\n\n## \u914d\u7f6eJAVA\u73af\u5883\u53d8\u91cf\ncat &lt;&lt;EOF &gt;/etc/profile.d/java.sh\nexport JAVA_HOME=/opt/jre\nexport CLASSPATH=.:$JAVA_HOME/lib\nexport PATH=$PATH:$JAVA_HOME/bin\nEOF\n\nsource /etc/profile.d/java.sh\n\n## \u914d\u7f6e\u7528\u6237\u6743\u9650\nvim /opt/tomcat/conf/tomcat-users.xml\n## \u6dfb\u52a0\u4e0b\u9762\u5b57\u6bb5\n  &lt;role rolename=\"tomcat\"/&gt;\n  &lt;role rolename=\"role1\"/&gt;\n  &lt;role rolename=\"manager-script\"/&gt;\n  &lt;role rolename=\"manager-gui\"/&gt;\n  &lt;role rolename=\"manager-status\"/&gt;\n  &lt;role rolename=\"admin-gui\"/&gt;\n  &lt;role rolename=\"admin-script\"/&gt;\n  &lt;user username=\"root\" password=\"root\" roles=\"manager-gui,manager-script,tomcat,admin-gui,admin-script\"/&gt;\n\n## \u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\nvim /opt/tomcat/webapps/manager/META-INF/context.xml\n## \u6ce8\u91ca\u4e0b\u9762\u8fd9\u884c\uff0cwebapps\u4e0b\u5176\u4ed6\u76ee\u5f55\u4e5f\u9700\u8981\u4fee\u6539\n&lt;!--   &lt;Valve className=\"org.apache.catalina.valves.RemoteAddrValve\"\n         allow=\"127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1\" /&gt; --&gt;\n\n## \u914d\u7f6e\u6839\u76ee\u5f55\u8bbf\u95ee\u5e94\u7528\n## Host\u6807\u7b7e\u6dfb\u52a0\u4e00\u884c\n      &lt;Host name=\"localhost\"  appBase=\"webapps\"\n            unpackWARs=\"true\" autoDeploy=\"true\"&gt;\n        &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\n               prefix=\"localhost_access_log\" suffix=\".txt\"\n               pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt;\n            &lt;Context docBase=\"/opt/tomcat/webapps/jenkins\" path=\"/\" reloadable=\"true\"/&gt;            \n      &lt;/Host&gt;\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#redis","title":"\u5b89\u88c5Redis","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>sudo apt install -y lsb-release curl gpg\ncurl -fsSL https://packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg\necho \"deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/redis.list\napt update\napt install -y redis\nsed -i \"s/bind 127.0.0.1/# bind 127.0.0.1/g\" /etc/redis/redis.conf\nsed -i \"s/6379/31013/g\" /etc/redis/redis.conf\nsed -i \"s/# requirepass foobared/requirepass 123456/g\" /etc/redis/redis.conf\nsed -i \"s/notify-keyspace-events \\\"\\\"/notify-keyspace-events Ex/g\" /etc/redis/redis.conf\nsystemctl enable --now redis-server\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#squid","title":"\u5b89\u88c5Squid","text":"<pre><code>apt install -y squid\n\ncat &lt;&lt;EOF &gt;/etc/squid/squid.conf\nhttp_port 3128\nhttp_port 3129 intercept\ncache_mem 64 MB\nmaximum_object_size 10 MB\ncache_dir ufs /var/spool/squid 100 16 256\naccess_log /var/log/squid/access.log\nacl localnet src 192.168.0.0/24\nhttp_access allow localnet\nhttp_access deny all\nEOF\n\nsystemctl enable --now squid\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#privoxy","title":"\u5b89\u88c5Privoxy","text":"<pre><code>apt install -y privoxy\n\ncat &lt;&lt;EOF &gt;/etc/privoxy/config\nuser-manual /usr/share/doc/privoxy/user-manual\nconfdir /etc/privoxy\nlogdir /var/log/privoxy\nactionsfile match-all.action\nactionsfile default.action\nactionsfile user.action\nfilterfile default.filter\nfilterfile user.filter\nlogfile logfile\ntoggle 1\nenable-remote-toggle 0\nenable-remote-http-toggle 0\nenable-edit-actions 0\nenforce-blocks 0\nbuffer-limit 4096\nenable-proxy-authentication-forwarding 0\nforwarded-connect-retries  0\naccept-intercepted-requests 0\nallow-cgi-request-crunching 0\nsplit-large-forms 0\nkeep-alive-timeout 5\ntolerate-pipelining 1\nsocket-timeout 300\npermit-access 192.168.0.0/24\ndeny-access www.example.com\nlisten-address 0.0.0.0:8118\n#forward-socks5t / 127.0.0.1:1080 .\nEOF\n\nsystemctl enable --now privoxy\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#shadowsocks-rust","title":"\u5b89\u88c5Shadowsocks-rust","text":"<pre><code>wget https://github.com/shadowsocks/shadowsocks-rust/releases/download/v1.18.1/shadowsocks-v1.18.1.x86_64-unknown-linux-musl.tar.xz\ntar Jxvf shadowsocks-v1.18.1.x86_64-unknown-linux-musl.tar.xz -C /usr/local/bin\n\n## \u670d\u52a1\u7aef\ncat &lt;&lt;EOF &gt;/usr/local/etc/ssserver.json\n{\n  \"server\":\"::\",\n  \"server_port\":31000,\n  \"password\":\"Xjj91oCesEfu2qwbNcMx6ELOoXV3qzYnYKFspgu5CIQ=\",\n  \"timeout\":60,\n  \"method\":\"2022-blake3-chacha20-poly1305\",\n  \"mode\":\"tcp_and_udp\",\n  \"fast_open\":false,\n  \"ipv6_only\": false,\n  \"ipv6_first\": true\n}\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/ssserver.service\n[Unit]\nDescription=Shadowsocks-rust Default Server Service\nDocumentation=https://github.com/shadowsocks/shadowsocks-rust\nAfter=network.target\n\n[Service]\nType=simple\nUser=root\nGroup=root\nLimitNOFILE=32768\nExecStart=/usr/local/bin/ssserver -c /usr/local/etc/ssserver.json\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsystemctl enable --now ssserver\n\n## \u5ba2\u6237\u7aef\ncat &lt;&lt;EOF &gt;/usr/local/etc/sslocal.json\n{\n  \"server\":\"your_ip\",\n  \"server_port\":31000,\n  \"password\":\"Xjj91oCesEfu2qwbNcMx6ELOoXV3qzYnYKFspgu5CIQ=\",\n  \"timeout\":60,\n  \"method\":\"2022-blake3-chacha20-poly1305\",\n  \"mode\":\"tcp_and_udp\",\n  \"fast_open\":false,\n  \"local_address\":\"0.0.0.0\",\n  \"local_port\":1080\n}\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/sslocal.service\n[Unit]\nDescription=Shadowsocks-rust Default Server Service\nDocumentation=https://github.com/shadowsocks/shadowsocks-rust\nAfter=network.target\n\n[Service]\nType=simple\nUser=root\nGroup=root\nLimitNOFILE=32768\nExecStart=/usr/local/bin/sslocal -c /usr/local/etc/sslocal.json\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsystemctl enable --now sslocal\n\ncat &lt;&lt;EOF &gt;proxy.sh\nexport http_proxy=http://localhost:1080\nexport https_proxy=http://localhost:1080\nEOF\n\ncat &lt;&lt;EOF &gt;unproxy.sh\nunset http_proxy\nunset https_proxy\nEOF\n\n## \u542f\u7528\u4ee3\u7406\nsource proxy.sh\n## \u7981\u7528\u4ee3\u7406\nsource unproxy.sh\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#gitlab","title":"\u5b89\u88c5Gitlab","text":"<pre><code>apt install -y curl openssh-server ca-certificates postfix\ncurl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash\napt install -y gitlab-ce\ngitlab-ctl reconfigure\nsystemctl enable --now gitlab-runsvdir\n## \u4fee\u6539Gitlab\u767b\u5f55\u7528\u6237root\u7684\u5bc6\u7801\uff0c\u6700\u5c118\u4f4d\u5bc6\u7801\ngitlab-rails console\nuser = User.where(id: 1).first\nuser.password = 'password'\nuser.password_confirmation = 'password'\nuser.save!\nexit\n## \u4fee\u6539\u57df\u540d\nvim /etc/gitlab/gitlab.rb\ngitlab-ctl reconfigure\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#_1","title":"\u67e5\u770b\u4f7f\u7528\u7684\u7aef\u53e3","text":"<pre><code>netstat -tunlp\ntcp        0      0 127.0.0.1:9229          0.0.0.0:*               LISTEN      2304/gitlab-workhor \ntcp        0      0 127.0.0.1:9236          0.0.0.0:*               LISTEN      2295/gitaly          \ntcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      2317/nginx: master  \ntcp        0      0 127.0.0.1:9121          0.0.0.0:*               LISTEN      2347/redis_exporter \ntcp        0      0 127.0.0.1:9090          0.0.0.0:*               LISTEN      2357/prometheus     \ntcp        0      0 127.0.0.1:9093          0.0.0.0:*               LISTEN      2372/alertmanager   \ntcp        0      0 127.0.0.1:9100          0.0.0.0:*               LISTEN      2335/node_exporter  \ntcp        0      0 127.0.0.1:9187          0.0.0.0:*               LISTEN      2382/postgres_expor \ntcp        0      0 127.0.0.1:9168          0.0.0.0:*               LISTEN      2342/ruby           \ntcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      1884/puma 6.4.0 (un \ntcp        0      0 127.0.0.1:8082          0.0.0.0:*               LISTEN      1915/sidekiq_export \ntcp        0      0 127.0.0.1:8092          0.0.0.0:*               LISTEN      1913/sidekiq 7.1.6  \ntcp        0      0 127.0.0.1:8150          0.0.0.0:*               LISTEN      1818/gitlab-kas     \ntcp        0      0 127.0.0.1:8151          0.0.0.0:*               LISTEN      1818/gitlab-kas     \ntcp        0      0 127.0.0.1:8153          0.0.0.0:*               LISTEN      1818/gitlab-kas     \ntcp        0      0 127.0.0.1:8154          0.0.0.0:*               LISTEN      1818/gitlab-kas     \ntcp        0      0 127.0.0.1:8155          0.0.0.0:*               LISTEN      1818/gitlab-kas     \ntcp        0      0 0.0.0.0:8060            0.0.0.0:*               LISTEN      2317/nginx: master  \ntcp6       0      0 :::9094                 :::*                    LISTEN      2372/alertmanager   \nudp6       0      0 :::9094                 :::*                                2372/alertmanager\n</code></pre>"},{"location":"blog/2024/03/21/ubuntu/#prometheus","title":"\u5b89\u88c5Prometheus","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>cd /opt/prometheus\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/prometheus.service\n[Unit]\nDescription=Prometheus Server\nDocumentation=https://prometheus.io/docs/introduction/overview/\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/opt/prometheus/prometheus --config.file=/opt/prometheus/prometheus.yml --web.listen-address=:39090\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/alertmanager.service\n[Unit]\nDescription=Alertmanager\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/alertmanager/alertmanager --config.file=/opt/prometheus/alertmanager/alertmanager.yml --cluster.listen-address=\"0.0.0.0:39094\" --web.listen-address=:39093\n\n[Install]\nWantedBy=default.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/blackbox_exporter.service\n[Unit]\nDescription=Blackbox Exporter\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/blackbox_exporter/blackbox_exporter --config.file=/opt/prometheus/blackbox_exporter/blackbox.yml --web.listen-address=:39115\n\n[Install]\nWantedBy=default.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/consul_exporter.service\n[Unit]\nDescription=Consul Exporter\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/consul_exporter/consul_exporter --web.listen-address=:39107\n\n[Install]\nWantedBy=default.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/graphite_exporter.service\n[Unit]\nDescription=Graphite Exporter\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/graphite_exporter/graphite_exporter --graphite.listen-address=\":39109\" --web.listen-address=:39108\n\n[Install]\nWantedBy=default.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/memcached_exporter.service\n[Unit]\nDescription=Memcached Exporter\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/memcached_exporter/memcached_exporter --web.listen-address=:39150\n\n[Install]\nWantedBy=default.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/node_exporter.service\n[Unit]\nDescription=Node Exporter\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/node_exporter/node_exporter --web.listen-address=:39100\n\n[Install]\nWantedBy=default.target\nEOF\n\ncat &lt;&lt;EOF &gt;/usr/lib/systemd/system/statsd_exporter.service\n[Unit]\nDescription=Statsd Exporter\nAfter=network.target\n\n[Service]\nUser=root\nExecStart=/opt/prometheus/statsd_exporter/statsd_exporter --statsd.listen-udp=\":39125\" --statsd.listen-tcp=\":39125\" --web.listen-address=:39102\n\n[Install]\nWantedBy=default.target\nEOF\n\nvim /opt/prometheus/prometheus.yml\n# \u6dfb\u52a0\u76d1\u63a7\n# my global config\nglobal:\n  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.\n  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.\n  # scrape_timeout is set to the global default (10s).\n\n# Alertmanager configuration\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n           - alertmanager:39093\n\n# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.\nrule_files:\n  # - \"first_rules.yml\"\n  # - \"second_rules.yml\"\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.\n  - job_name: \"prometheus\"\n\n    # metrics_path defaults to '/metrics'\n    # scheme defaults to 'http'.\n\n    static_configs:\n      - targets: [\"192.168.254.100:39090\"]\n\n  - job_name: 'blackbox_exporter'\n    static_configs:\n      - targets: ['192.168.254.100:39115']\n  - job_name: 'consul_exporter'\n    static_configs:\n      - targets: ['192.168.254.100:39107']\n  - job_name: 'graphite_exporter'\n    static_configs:\n      - targets: ['192.168.254.100:39108']\n  - job_name: 'memcached_exporter'\n    static_configs:\n      - targets: ['192.168.254.100:39150']\n  - job_name: 'node_exporter'\n    static_configs:\n      - targets: ['192.168.254.100:39100']\n  - job_name: 'statsd_exporter'\n    static_configs:\n      - targets: ['192.168.254.100:39102']\n\nsystemctl enable --now prometheus\nsystemctl enable --now alertmanager\nsystemctl enable --now blackbox_exporter\nsystemctl enable --now consul_exporter\nsystemctl enable --now graphite_exporter\nsystemctl enable --now memcached_exporter\nsystemctl enable --now node_exporter\nsystemctl enable --now statsd_exporter\n\nsystemctl restart prometheus\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#grafana","title":"\u5b89\u88c5Grafana","text":"<p>http://localhost:3000 <pre><code>apt install -y apt-transport-https software-properties-common wget\nmkdir -p /etc/apt/keyrings/\nwget -q -O - https://apt.grafana.com/gpg.key | gpg --dearmor | tee /etc/apt/keyrings/grafana.gpg &gt; /dev/null\necho \"deb [signed-by=/etc/apt/keyrings/grafana.gpg] https://apt.grafana.com stable main\" | tee -a /etc/apt/sources.list.d/grafana.list\napt update\napt install -y grafana\nsystemctl enable --now grafana-server\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#hadoop2102","title":"\u5b89\u88c5Hadoop2.10.2","text":"<p>JDK\u4e0b\u8f7d Hadoop\u4e0b\u8f7d http://localhost:50070 <pre><code>wget https://archive.apache.org/dist/hadoop/common/hadoop-2.10.2/hadoop-2.10.2.tar.gz\ntar zxvf hadoop-2.10.2.tar.gz\nmv hadoop-2.10.2 /opt/hadoop\ntar zxvf jdk-8u391-linux-x64.tar.gz -C /opt/\n\nvim /opt/hadoop/etc/hadoop/hadoop-env.sh\nJAVA_HOME=/opt/jdk1.8.0_391\n\nvim /opt/hadoop/etc/hadoop/hdfs-site.xml\n&lt;configuration&gt;\n    &lt;property&gt;\n        &lt;name&gt;dfs.replication&lt;/name&gt;\n        &lt;value&gt;1&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n\nvim /opt/hadoop/etc/hadoop/core-site.xml\n&lt;configuration&gt;\n    &lt;property&gt;\n        &lt;name&gt;fs.defaultFS&lt;/name&gt;\n        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;hadoop.proxyuser.root.hosts&lt;/name&gt;\n        &lt;value&gt;*&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;hadoop.proxyuser.root.users&lt;/name&gt;\n        &lt;value&gt;*&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n        &lt;value&gt;/opt/hadoop/data&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n\n## hadoop3.3.6\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u914d\u7f6e\u5141\u8bb8root\u8fd0\u884c\nvim /opt/hadoop/sbin/start-dfs.sh\nvim /opt/hadoop/sbin/stop-dfs.sh\n# limitations under the License.\nHDFS_DATANODE_USER=root\nHADOOP_SECURE_DN_USER=hdfs\nHDFS_NAMENODE_USER=root\nHDFS_SECONDARYNAMENODE_USER=root\n\nvim /opt/hadoop/sbin/start-yarn.sh\nvim /opt/hadoop/sbin/stop-yarn.sh\n# limitations under the License.\nYARN_RESOURCEMANAGER_USER=root\nHADOOP_SECURE_DN_USER=yarn\nYARN_NODEMANAGER_USER=root\n\nssh-keygen -t rsa -P \"\"\ncat $HOME/.ssh/id_rsa.pub &gt;&gt; $HOME/.ssh/authorized_keys\n\n/opt/hadoop/bin/hdfs namenode -format\n/opt/hadoop/sbin/start-all.sh\n/opt/hadoop/sbin/stop-all.sh\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#hive239","title":"\u5b89\u88c5Hive2.3.9","text":"<p>guava\u4e0b\u8f7d mysql-connector-java\u4e0b\u8f7d Hive\u4e0b\u8f7d http://localhost:10002 <pre><code>wget https://dlcdn.apache.org/hive/hive-2.3.9/apache-hive-2.3.9-bin.tar.gz\ntar zxvf apache-hive-2.3.9-bin.tar.gz\nmv apache-hive-2.3.9-bin /opt/hive\nmv /opt/hive/conf/hive-env.sh.template /opt/hive/conf/hive-env.sh\nvim /opt/hive/conf/hive-env.sh\nHADOOP_HOME=/opt/hadoop\n\n## \u672c\u5730\u6a21\u5f0f\ncat &lt;&lt;EOF &gt;/opt/hive/conf/hive-site.xml\n&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;\n  &lt;value&gt;/user/hive/warehouse&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.metastore.local&lt;/name&gt;\n  &lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;\n  &lt;value&gt;jdbc:mysql://localhost/metastore?createDatabaseIfNotExist=true&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;\n  &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;\n  &lt;value&gt;root&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;\n  &lt;value&gt;root&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.strict.checks.cartesian.product&lt;/name&gt;\n  &lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.support.quoted_identifiers&lt;/name&gt;\n  &lt;value&gt;none&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.support.subqueries&lt;/name&gt;\n  &lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;/configuration&gt;\nEOF\n\n## \u8fdc\u7a0b\u6a21\u5f0f\ncat &lt;&lt;EOF &gt;/opt/hive/conf/hive-site.xml\n&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;\n  &lt;value&gt;/user/hive/warehouse&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;\n  &lt;value&gt;jdbc:mysql://localhost:3306/metastore?createDatabaseIfNotExist=true&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;\n  &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;\n  &lt;value&gt;root&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;\n  &lt;value&gt;root&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.metastore.local&lt;/name&gt;\n  &lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.metastore.uris&lt;/name&gt;\n  &lt;value&gt;thrift://localhost:9083&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.strict.checks.cartesian.product&lt;/name&gt;\n  &lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.support.quoted_identifiers&lt;/name&gt;\n  &lt;value&gt;none&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n  &lt;name&gt;hive.support.subqueries&lt;/name&gt;\n  &lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;/configuration&gt;\nEOF\n\nmysql -uroot -p\nmysql&gt; create database metastore;\n\n/opt/hadoop/bin/hadoop fs -mkdir -p /user/hive/warehouse\n/opt/hadoop/bin/hadoop fs -chmod -R 777 /tmp\n/opt/hadoop/bin/hadoop fs -chmod -R 777 /user\nwget https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.30/mysql-connector-java-8.0.30.jar\ncp mysql-connector-java-8.0.30.jar /opt/hive/lib\n/opt/hive/bin/schematool -dbType mysql -initSchema -verbose\n/opt/hive/bin/hive\n/opt/hive/bin/hiveserver2\n/opt/hive/bin/beeline -u jdbc:hive2://localhost:10000\n\n## \u521b\u5efa\u542f\u52a8\u811a\u672c\nmkdir /opt/hive/logs\n\nvim /opt/hive/start.sh\n#!/bin/bash\nps -ef|grep 'hiveserver2'|grep -v 'grep'|awk '{print $2}'|xargs kill -9\nnohup /opt/hive/bin/hiveserver2 &gt;&gt; /opt/hive/logs/hiveserver2.log 2&gt;&amp;1 &amp;\ntail -f /opt/hive/logs/hiveserver2.log\n\nvim /opt/hive/stop.sh\n#!/bin/bash\nps -ef|grep 'hiveserver2'|grep -v 'grep'|awk '{print $2}'|xargs kill -9\n\nchmod +x /opt/hive/*.sh\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#zookeeper","title":"\u5b89\u88c5Zookeeper","text":"<p>\u5b98\u65b9\u6587\u6863 <pre><code>wget https://dlcdn.apache.org/zookeeper/zookeeper-3.8.4/apache-zookeeper-3.8.4-bin.tar.gz\ntar zxvf apache-zookeeper-3.8.4-bin.tar.gz\nmv apache-zookeeper-3.8.4-bin /opt/zookeeper\nmv /opt/zookeeper/conf/zoo_sample.cfg /opt/zookeeper/conf/zoo.cfg\n\nvim /opt/zookeeper/conf/zoo.cfg\ndataDir=/opt/zookeeper/data\n4lw.commands.whitelist=mntr,conf,ruok\n\nmkdir /opt/zookeeper/data\n/opt/zookeeper/bin/zkServer.sh start\n/opt/zookeeper/bin/zkServer.sh stop\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#hbase","title":"\u5b89\u88c5Hbase","text":"<p>\u5b98\u65b9\u6587\u6863 http://localhost:16010 <pre><code>wget https://dlcdn.apache.org/hbase/2.5.7/hbase-2.5.7-bin.tar.gz\ntar zxvf hbase-2.5.7-bin.tar.gz\nmv hbase-2.5.7-bin /opt/hbase\nmkdir /opt/hbase/data\n\nvim /opt/hbase/conf/hbase-env.sh\nexport JAVA_HOME=/opt/jdk1.8.0_391\nexport HBASE_MANAGES_ZK=false\n\ncat &lt;&lt;EOF &gt;/opt/hbase/conf/hbase-site.xml\n&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.rootdir&lt;/name&gt;\n    &lt;value&gt;hdfs://localhost:9000/hbase&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;\n    &lt;value&gt;localhost&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n   &lt;name&gt;hbase.zookeeper.property.clientPort&lt;/name&gt;\n   &lt;value&gt;2181&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;\n    &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.tmp.dir&lt;/name&gt;\n    &lt;value&gt;/opt/hbase/data&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;\n    &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\nEOF\n\n/opt/hbase/bin/start-hbase.sh\n/opt/hbase/bin/stop-hbase.sh\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#solr","title":"\u5b89\u88c5Solr","text":"<p>\u5b98\u65b9\u6587\u6863 http://localhost:8983 <pre><code>tar zxvf solr-8.11.3.tgz\nmv solr-8.11.3 /opt/solr\n\nvim /opt/solr/bin/solr.in.sh\nSOLR_JAVA_HOME=\"/opt/jdk1.8.0_391\"\nZK_HOST=\"localhost:2181\"\nSOLR_RECOMMENDED_OPEN_FILES=65000\nSOLR_RECOMMENDED_MAX_PROCESSES=65000\nSOLR_ULIMIT_CHECKS=false\n\n/opt/solr/bin/solr start -force\n/opt/solr/bin/solr stop -force\n</code></pre></p>"},{"location":"blog/2024/03/21/ubuntu/#sqoop147","title":"\u5b89\u88c5Sqoop1.4.7","text":"<p>Sqoop\u4e0b\u8f7d <pre><code>wget https://archive.apache.org/dist/sqoop/1.4.7/sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz\ntar zxvf sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz\nmv sqoop-1.4.7.bin__hadoop-2.6.0 /opt/sqoop\nmv /opt/sqoop/conf/sqoop-env-template.sh /opt/sqoop/conf/sqoop-env.sh\n\nvim /opt/sqoop/conf/sqoop-env.sh\nexport HADOOP_COMMON_HOME=/opt/hadoop\nexport HADOOP_MAPRED_HOME=/opt/hadoop/share/hadoop/mapreduce\nexport HBASE_HOME=/opt/hbase\nexport HIVE_HOME=/opt/hive\nexport ZOOCFGDIR=/opt/zookeeper/conf\nexport HIVE_CONF_DIR=/opt/hive/conf\n\nwget https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.30/mysql-connector-java-8.0.30.jar\ncp mysql-connector-java-8.0.30.jar /opt/sqoop/lib\ncp /opt/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-* /opt/sqoop/lib\ncp -r /opt/hive/lib/* /opt/sqoop/lib\n/opt/hadoop/bin/hadoop fs -mkdir -p /opt\n/opt/hadoop/bin/hdfs dfs -copyFromLocal /opt/sqoop hdfs://localhost:9000/opt/sqoop\n/opt/hadoop/bin/hadoop fs -rm -r /opt\n\n## \u6d4b\u8bd5\u5bfc\u5165MySQL\u6570\u636e\u5e93\n/opt/sqoop/bin/sqoop list-tables \\\n--connect jdbc:mysql://localhost:3306/test \\\n--username root \\\n--password root\n\n/opt/sqoop/bin/sqoop import \\\n--connect jdbc:mysql://localhost:3306/test \\\n--username root \\\n--password root \\\n--table web \\\n--delete-target-dir \\\n--hive-import \\\n--hive-table web \\\n--hive-overwrite \\\n--create-hive-table \\\n--fields-terminated-by ',' \\\n-m 1\n</code></pre></p>"},{"location":"blog/archive/2024/","title":"2024","text":""},{"location":"blog/archive/2023/","title":"2023","text":""},{"location":"blog/category/%E6%96%87%E6%A1%A3/","title":"\u6587\u6863","text":""},{"location":"blog/category/%E8%BD%AF%E4%BB%B6/","title":"\u8f6f\u4ef6","text":""}]}